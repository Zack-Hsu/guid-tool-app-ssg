(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8111],{18439:e=>{e.exports={tab:"Tab_tab__F0Hng",tab__header:"Tab_tab__header__LTdUD","tab__header--sticky":"Tab_tab__header--sticky__gPtSM",tab__content:"Tab_tab__content__px4Hs",tab__panel:"Tab_tab__panel__m017Q","tab--rounded":"Tab_tab--rounded__fGZqY","tab--flat":"Tab_tab--flat__2p51d"}},25953:(e,a,t)=>{"use strict";t.d(a,{VenueProvider:()=>f,Z:()=>m});var r=t(81556),n=t(47256),i=t(47077),o=t(28404),s=t(91765),_=t(47251),d=t(7241),l=t(50861),c=t(13588);let u=(0,n.createContext)(void 0),v={languages:[...c.Fc],languageNames:{...c.G2}},g={versions:[...c.MB],versionNames:{...c.v4}};function f(e){let{children:a}=e,[t,f]=(0,n.useState)(null),[m,C]=(0,n.useState)(!0),[p,h]=(0,n.useState)(null),[b,I]=(0,n.useState)([]),[x,y]=(0,n.useState)([]),j=(0,_.Ym)(),{version:w}=(0,d.t)(),N=(0,l.MV)(),k=(0,n.useCallback)(async()=>{try{C(!0),h(null),s.vF.info("[VenueContext] Loading venue_uid from system_info",{});let e=await (0,i.$4)(j,w);f(e),s.vF.info("[VenueContext] venue_uid loaded",{uid:e})}catch(a){let e=a instanceof Error?a.message:"Unknown error";s.vF.error("[VenueContext] Failed to load venue_uid",{error:e}),h(e)}finally{C(!1)}},[j,w]),T=(0,n.useCallback)(async()=>{try{var e,a,t,r;let n=await (0,i.yV)(j,w),_=!1,d=!1;if(s.vF.info("[VenueContext] systemInfo loaded",{hasVenues:!!(null==n?void 0:n.venues),venuesLength:null==n||null==(e=n.venues)?void 0:e.length,firstVenue:(null==n||null==(a=n.venues)?void 0:a[0])?{uid:n.venues[0].uid,supported_languages:n.venues[0].supported_languages,supported_contents:n.venues[0].supported_contents}:null}),(null==n?void 0:n.venues)&&n.venues.length>0){let e=n.venues[0];e.supported_languages&&e.supported_languages.length>0&&(I(e.supported_languages),_=!0,s.vF.info("[VenueContext] Loaded supported_languages from systemInfo",{languages:e.supported_languages})),e.supported_contents&&e.supported_contents.length>0&&(y(e.supported_contents),d=!0,s.vF.info("[VenueContext] Loaded supported_contents from systemInfo",{contents:e.supported_contents}))}if(!_||!d){s.vF.info("[VenueContext] systemInfo missing data, trying package_info",{hasLanguages:_,hasContents:d});let e=await (0,o.QE)();s.vF.info("[VenueContext] packageInfo loaded",{hasPackageInfo:!!e,supported_languages:null==e?void 0:e.supported_languages,supported_contents:null==e?void 0:e.supported_contents}),e?(!_&&(null==(t=e.supported_languages)?void 0:t.length)>0&&(I(e.supported_languages),s.vF.info("[VenueContext] Loaded supported_languages from package_info",{languages:e.supported_languages})),!d&&(null==(r=e.supported_contents)?void 0:r.length)>0&&(y(e.supported_contents),s.vF.info("[VenueContext] Loaded supported_contents from package_info",{contents:e.supported_contents}))):s.vF.warn("[VenueContext] No package_info available, using defaults")}}catch(e){s.vF.warn("[VenueContext] Failed to load system config, using defaults",{error:e instanceof Error?e.message:"Unknown error"})}},[j,w]);(0,n.useEffect)(()=>{if(!N)return void s.vF.debug("[VenueContext] Waiting for setup to complete...");k()},[k,N]),(0,n.useEffect)(()=>{N&&T()},[T,N]);let V=(0,n.useMemo)(()=>{if(0===b.length)return v;let e=b.filter(e=>c.Fc.includes(e)),a={};return e.forEach(e=>{a[e]=c.G2[e]||e}),{languages:e.length>0?e:v.languages,languageNames:Object.keys(a).length>0?a:v.languageNames}},[b]),G=(0,n.useMemo)(()=>{if(0===x.length)return g;let e=x.filter(e=>c.MB.includes(e)),a={};return e.forEach(e=>{a[e]=c.v4[e]||e}),{versions:e.length>0?e:g.versions,versionNames:Object.keys(a).length>0?a:g.versionNames}},[x]),E=(0,n.useMemo)(()=>({venueUid:t,isLoading:m,error:p,reload:k,languageConfig:V,versionConfig:G}),[t,m,p,k,V,G]);return(0,r.jsx)(u.Provider,{value:E,children:a})}function m(){let e=(0,n.useContext)(u);if(void 0===e)throw Error("useVenue must be used within a VenueProvider");return e}},35070:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>j});var r=t(81556),n=t(47256),i=t(34739),o=t(54961),s=t(35566),_=t(93212),d=t(39660),l=t(93171),c=t.n(l),u=t(52728),v=t(58387),g=t.n(v);let f=e=>{let{title:a="展品介紹",content:t="",showIcon:n=!1,image:i,imageAlt:o,images:s,imagePosition:_="after",className:l=""}=e,v=()=>s&&s.length>0?s&&0!==s.length?(0,r.jsx)("div",{className:g().introCard__imageGrid,children:s.map((e,t)=>(0,r.jsx)("div",{className:g().introCard__imageGridItem,children:(0,r.jsx)(d.$,{src:e.url,alt:e.alt||"".concat(a||"圖片"," ").concat(t+1),width:400,height:200,className:g().introCard__imageGridImage})},t))}):null:i?(0,r.jsx)("div",{className:g().introCard__imageContainer,children:(0,r.jsx)(d.$,{src:i,alt:o||a||"",width:1600,height:900,className:g().introCard__image})}):null,f=!a&&!t&&(i||s&&s.length>0);return(0,r.jsxs)("div",{className:c()(g().introCard,{[g()["introCard--imageOnly"]]:f},l),children:[a?n?(0,r.jsxs)("div",{className:g().introCard__header,children:[(0,r.jsx)(u.L5.Outline,{size:24,color:"white"}),(0,r.jsx)("h3",{className:g().introCard__title,children:a})]}):(0,r.jsx)("h3",{className:g().introCard__titleOnly,children:a}):null,"before"===_&&v(),t?(0,r.jsx)("p",{className:g().introCard__content,children:t}):null,"after"===_&&v()]})};f.displayName="IntroCard";var m=t(35435),C=t.n(m);let p={schedule:u.dE.Outline,confirmation_number:u.kT,call:u.GG};function h(e){let{item:a,className:t}=e,n=p[a.icon];return(0,r.jsxs)("div",{className:c()(C().visitorInfoCard,t),children:[(0,r.jsxs)("div",{className:C().visitorInfoCard__header,children:[n&&(0,r.jsx)("div",{className:C().visitorInfoCard__icon,children:(0,r.jsx)(n,{size:24,color:"white"})}),(0,r.jsx)("h3",{className:C().visitorInfoCard__title,children:a.title})]}),(0,r.jsx)("div",{className:C().visitorInfoCard__content,children:a.cards.map(e=>(0,r.jsx)("div",{className:C().visitorInfoCard__card,children:(0,r.jsxs)("div",{className:C().visitorInfoCard__cardRow,children:[e.tag&&(0,r.jsx)("div",{className:C().visitorInfoCard__tag,children:e.tag}),(0,r.jsxs)("div",{className:C().visitorInfoCard__cardBody,children:[(0,r.jsx)("h4",{className:C().visitorInfoCard__cardTitle,children:e.title}),e.subtitle&&(0,r.jsx)("p",{className:C().visitorInfoCard__cardSubtitle,children:e.subtitle})]})]})},e.cardID))}),a.cards.some(e=>e.details&&e.details.length>0)&&(0,r.jsx)("ul",{className:C().visitorInfoCard__detailsList,children:a.cards.map(e=>{var a;return null==(a=e.details)?void 0:a.map((a,t)=>(0,r.jsx)("li",{children:a},"".concat(e.cardID,"-").concat(t)))})})]})}var b=t(89120),I=t(25953),x=t(86693),y=t.n(x);function j(){let e=(0,i.c3)("aboutMuseum"),a=(0,o.useRouter)(),[t,d]=(0,n.useState)("overview"),{venueUid:l}=(0,I.Z)(),{data:c,loading:u,error:v}=function(e){let a=(0,b._)(),[t,r]=(0,n.useState)(null),[i,o]=(0,n.useState)(!0),[s,_]=(0,n.useState)(null),[d,l]=(0,n.useState)(!1),c=(0,n.useCallback)(async()=>{try{o(!0),_(null);let t=await a.about.getData(e);r(t),l(!navigator.onLine)}catch(e){_(e instanceof Error?e:Error("Unknown error")),l(!0)}finally{o(!1)}},[a.about,e]),u=(0,n.useCallback)(async()=>{try{o(!0),_(null);let t=await a.about.refresh(e);r(t),l(!1)}catch(e){_(e instanceof Error?e:Error("Refresh failed")),l(!0)}finally{o(!1)}},[a.about,e]);return(0,n.useEffect)(()=>{let e=()=>{l(!1),c()},a=()=>{l(!0)};return window.addEventListener("online",e),window.addEventListener("offline",a),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",a)}},[c]),(0,n.useEffect)(()=>{c()},[c]),{data:t,loading:i,error:s,isOffline:d,refetch:c,refresh:u}}(l||""),g=[{key:"overview",title:e("tabs.overview"),content:(0,r.jsx)(w,{data:null==c?void 0:c.overview,loading:u,error:v})},{key:"visitorInfo",title:e("tabs.visitorInfo"),content:(0,r.jsx)(N,{data:null==c?void 0:c.visitorInfo,loading:u,error:v})}];return(0,r.jsxs)("div",{className:y().page,children:[(0,r.jsx)(s.A,{title:e("title"),showBackArrow:!0,onBackClick:()=>{a.back()},showRight:!0,rightButtonType:"help",className:y().page__navbar}),(0,r.jsx)("div",{className:y().page__content,"data-scroll-container":!0,children:(0,r.jsx)("div",{className:y().page__tabContainer,children:(0,r.jsx)(_.A,{items:g,activeKey:t,onChange:d,enableSwiper:!0,variant:"rounded",stickyTop:0,className:y().page__tabs})})})]})}function w(e){let{data:a,loading:t,error:n}=e,o=(0,i.c3)("common");return t?(0,r.jsx)("div",{className:y().overviewTab,children:(0,r.jsx)("div",{className:y().loadingState,children:o("loading")})}):n||!a?(0,r.jsx)("div",{className:y().overviewTab,children:(0,r.jsx)("div",{className:y().errorState,children:n?n.message:o("noData")})}):(0,r.jsx)("div",{className:y().overviewTab,children:a.blocks.map(e=>(0,r.jsx)(f,{title:e.title,content:e.content,image:e.image,imageAlt:e.imageAlt,images:e.images},e.blockID))})}function N(e){let{data:a,loading:t,error:n}=e,o=(0,i.c3)("common");return t?(0,r.jsx)("div",{className:y().visitorInfoTab,children:(0,r.jsx)("div",{className:y().loadingState,children:o("loading")})}):n||!a?(0,r.jsx)("div",{className:y().visitorInfoTab,children:(0,r.jsx)("div",{className:y().errorState,children:n?n.message:o("noData")})}):(0,r.jsx)("div",{className:y().visitorInfoTab,children:a.items.map(e=>(0,r.jsx)(h,{item:e},e.itemID))})}},35435:e=>{e.exports={visitorInfoCard:"VisitorInfoCard_visitorInfoCard__LHnAx",visitorInfoCard__header:"VisitorInfoCard_visitorInfoCard__header__WknOn",visitorInfoCard__icon:"VisitorInfoCard_visitorInfoCard__icon__aDW_C",visitorInfoCard__title:"VisitorInfoCard_visitorInfoCard__title__QKu90",visitorInfoCard__content:"VisitorInfoCard_visitorInfoCard__content__kORqI",visitorInfoCard__card:"VisitorInfoCard_visitorInfoCard__card__M2LXr",visitorInfoCard__cardRow:"VisitorInfoCard_visitorInfoCard__cardRow__z3OPo",visitorInfoCard__tag:"VisitorInfoCard_visitorInfoCard__tag___cmzx",visitorInfoCard__cardBody:"VisitorInfoCard_visitorInfoCard__cardBody__5Ot1r",visitorInfoCard__cardTitle:"VisitorInfoCard_visitorInfoCard__cardTitle__IZ2Gu",visitorInfoCard__cardSubtitle:"VisitorInfoCard_visitorInfoCard__cardSubtitle__B0okc",visitorInfoCard__detailsList:"VisitorInfoCard_visitorInfoCard__detailsList__vWs2z"}},54961:(e,a,t)=>{"use strict";var r=t(60541);t.o(r,"permanentRedirect")&&t.d(a,{permanentRedirect:function(){return r.permanentRedirect}}),t.o(r,"redirect")&&t.d(a,{redirect:function(){return r.redirect}}),t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}})},58387:e=>{e.exports={introCard:"IntroCard_introCard___o14C","introCard--imageOnly":"IntroCard_introCard--imageOnly__m6zc2",introCard__header:"IntroCard_introCard__header__2rMVV",introCard__title:"IntroCard_introCard__title__ctx40",introCard__titleOnly:"IntroCard_introCard__titleOnly__L6T_w",introCard__content:"IntroCard_introCard__content__FxnVP",introCard__imageContainer:"IntroCard_introCard__imageContainer__uhPRD",introCard__image:"IntroCard_introCard__image__qvA57",introCard__imageGrid:"IntroCard_introCard__imageGrid__HPZ9H",introCard__imageGridItem:"IntroCard_introCard__imageGridItem__gPe4V",introCard__imageGridImage:"IntroCard_introCard__imageGridImage__B6r7D"}},64373:(e,a,t)=>{Promise.resolve().then(t.bind(t,35070))},86693:e=>{e.exports={page:"page_page__Mr2Vf",page__navbar:"page_page__navbar__AObXg",page__content:"page_page__content__PKHXW",page__tabContainer:"page_page__tabContainer__jUN6D",loadingState:"page_loadingState__0i5Ao",errorState:"page_errorState__njCjX",overviewTab:"page_overviewTab__61O3E",overviewTab__hero:"page_overviewTab__hero__iO8yt",overviewTab__heroCard:"page_overviewTab__heroCard__NA7sV",overviewTab__introCard:"page_overviewTab__introCard__Mh_RK",overviewTab__collection:"page_overviewTab__collection__9JWDw",overviewTab__collectionCard:"page_overviewTab__collectionCard__XM22r",categoryGrid:"page_categoryGrid__lzElQ",categoryGrid__item:"page_categoryGrid__item__wQixf",categoryGrid__imageWrapper:"page_categoryGrid__imageWrapper__Xyxw1",categoryGrid__placeholder:"page_categoryGrid__placeholder__iI8LM",categoryGrid__label:"page_categoryGrid__label__1LfCa",visitorInfoTab:"page_visitorInfoTab__hHAKh"}},93212:(e,a,t)=>{"use strict";t.d(a,{A:()=>d,o:()=>_});var r=t(81556),n=t(47256),i=t(83678),o=t(18439),s=t.n(o);let _=e=>{var a;let{items:t,defaultActiveKey:o,activeKey:_,onChange:d,enableSwiper:l=!0,activeLineMode:c="full",variant:u="rounded",isHeaderSticky:v=!1,stickyTop:g,hideHeader:f=!1,className:m=""}=e,[C,p]=(0,n.useState)(o||(null==(a=t[0])?void 0:a.key)||""),h=(0,n.useRef)(null),b=void 0!==_?_:C,I=[s().tab,"flat"===u?s()["tab--flat"]:s()["tab--rounded"],m].filter(Boolean).join(" "),x=[s().tab__header,v?s()["tab__header--sticky"]:""].filter(Boolean).join(" ");return(0,r.jsxs)("div",{className:I,children:[!f&&(0,r.jsx)(i.tU,{activeKey:b,onChange:e=>{void 0===_&&p(e);let a=t.findIndex(a=>a.key===e);if(-1!==a&&l){var r;null==(r=h.current)||r.swipeTo(a)}null==d||d(e)},activeLineMode:c,className:x,style:void 0!==g?{top:"".concat(g,"px")}:void 0,children:t.map(e=>(0,r.jsx)(i.tU.Tab,{title:e.title,disabled:e.disabled},e.key))}),l?(0,r.jsx)(i.RC,{ref:h,defaultIndex:t.findIndex(e=>e.key===b),onIndexChange:e=>{var a;let r=null==(a=t[e])?void 0:a.key;r&&r!==b&&(void 0===_&&p(r),null==d||d(r))},indicator:!1,allowTouchMove:!0,className:s().tab__content,style:{"--height":"auto"},children:t.map(e=>(0,r.jsx)(i.RC.Item,{children:e.content},e.key))}):(0,r.jsx)("div",{className:s().tab__content,children:t.map(e=>(0,r.jsx)("div",{className:s().tab__panel,style:{display:e.key===b?"block":"none"},children:e.content},e.key))})]})};_.displayName="Tab";let d=_}},e=>{e.O(0,[4676,9152,7906,29,4772,4730,3678,6208,4576,4078,9120,861,9402,5510,7358],()=>e(e.s=64373)),_N_E=e.O()}]);