(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5061],{1201:(e,r,o)=>{Promise.resolve().then(o.bind(o,98158))},1486:(e,r,o)=>{"use strict";o.d(r,{U:()=>_});var t=o(81556);o(47256);var a=o(34739),i=o(39660),n=o(93171),l=o.n(n),c=o(52728),s=o(86957),d=o.n(s);let _=e=>{let{image:r,title:o="Label",location:n={floor:"2F",room:"203"},isEmpty:s=!1,emptyText:_="尚未收藏任何展品",size:k="small",onClick:u,onFavoriteClick:C,className:m="",imageAlt:w}=e,p=(0,a.c3)("workCard"),g="large"===k?d()["workCardSelection--large"]:"";return s?(0,t.jsx)("div",{className:l()(d().workCardSelection,d()["workCardSelection--empty"],g,m),children:(0,t.jsx)("div",{className:d().workCardSelection__imageContainer,children:(0,t.jsxs)("div",{className:d().workCardSelection__emptyBackground,children:[(0,t.jsx)(c.CC.Outline,{size:24,color:"white"}),(0,t.jsx)("p",{className:d().workCardSelection__emptyText,children:_||p("noItems")})]})})}):(0,t.jsxs)("div",{className:l()(d().workCardSelection,{[d()["workCardSelection--clickable"]]:!!u},g,m),onClick:u,children:[(0,t.jsxs)("div",{className:d().workCardSelection__imageContainer,children:[r&&(0,t.jsx)(i.$,{src:r,alt:w||o,fill:!0,className:d().workCardSelection__image,style:{objectFit:"cover"}}),C&&(0,t.jsx)("button",{type:"button",className:d().workCardSelection__favoriteButton,onClick:e=>{e.stopPropagation(),null==C||C(e)},"aria-label":p("unfavoriteAria"),children:(0,t.jsx)(c.CC.Filled,{size:16,color:"white"})})]}),(0,t.jsxs)("div",{className:d().workCardSelection__content,children:[(0,t.jsxs)("div",{className:d().workCardSelection__location,children:[(0,t.jsx)("span",{children:n.floor}),(0,t.jsx)("span",{children:n.room})]}),(0,t.jsx)("p",{className:d().workCardSelection__title,children:o})]})]})};_.displayName="WorkCardSelection"},54961:(e,r,o)=>{"use strict";var t=o(60541);o.o(t,"permanentRedirect")&&o.d(r,{permanentRedirect:function(){return t.permanentRedirect}}),o.o(t,"redirect")&&o.d(r,{redirect:function(){return t.redirect}}),o.o(t,"useParams")&&o.d(r,{useParams:function(){return t.useParams}}),o.o(t,"usePathname")&&o.d(r,{usePathname:function(){return t.usePathname}}),o.o(t,"useRouter")&&o.d(r,{useRouter:function(){return t.useRouter}})},86957:e=>{e.exports={workCardSelection:"WorkCardSelection_workCardSelection__BORNG","workCardSelection--large":"WorkCardSelection_workCardSelection--large__OmMN7",workCardSelection__imageContainer:"WorkCardSelection_workCardSelection__imageContainer__p7C7A","workCardSelection--clickable":"WorkCardSelection_workCardSelection--clickable__0aTZR","workCardSelection--empty":"WorkCardSelection_workCardSelection--empty__H1w02",workCardSelection__image:"WorkCardSelection_workCardSelection__image__RQdcu",workCardSelection__favoriteButton:"WorkCardSelection_workCardSelection__favoriteButton__xsX98",workCardSelection__emptyBackground:"WorkCardSelection_workCardSelection__emptyBackground__Gn3OX",workCardSelection__emptyText:"WorkCardSelection_workCardSelection__emptyText__ds2V6",workCardSelection__content:"WorkCardSelection_workCardSelection__content__BIwzz",workCardSelection__location:"WorkCardSelection_workCardSelection__location__J6u5p",workCardSelection__title:"WorkCardSelection_workCardSelection__title__TjtU7"}},93171:(e,r)=>{var o;!function(){"use strict";var t={}.hasOwnProperty;function a(){for(var e="",r=0;r<arguments.length;r++){var o=arguments[r];o&&(e=i(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var r="";for(var o in e)t.call(e,o)&&e[o]&&(r=i(r,o));return r}(o)))}return e}function i(e,r){return r?e?e+" "+r:e+r:e}e.exports?(a.default=a,e.exports=a):void 0===(o=(function(){return a}).apply(r,[]))||(e.exports=o)}()},96797:e=>{e.exports={favoritesPage:"FavoritesPage_favoritesPage__j_8iz",content:"FavoritesPage_content__PeFv2","content--withMiniPlayer":"FavoritesPage_content--withMiniPlayer__I_YMt",grid:"FavoritesPage_grid__jCULw",loading:"FavoritesPage_loading__ayta4",empty:"FavoritesPage_empty__Z6uzz"}},98158:(e,r,o)=>{"use strict";o.d(r,{FavoritesPage:()=>g});var t=o(81556),a=o(47256),i=o(34739),n=o(47251),l=o(54961),c=o(35566),s=o(1486),d=o(47469),_=o(71526),k=o(85110),u=o(28353),C=o(93257),m=o(91765),w=o(96797),p=o.n(w);let g=()=>{let e=(0,i.c3)("settings"),r=(0,n.Ym)(),o=(0,l.useRouter)(),{play:w,setPlaylist:g,setWorkCategories:h,visible:S,currentTrack:v}=(0,d.F)(),{version:f,contentVersionType:x,worksToPlaylist:y}=(0,_.S)(),[b,j]=(0,a.useState)([]),[P,F]=(0,a.useState)(!0),N=(0,a.useCallback)(async()=>{F(!0);try{let e=await (0,k.qM)(),o=await Promise.all(e.map(async e=>{try{var o,t;let a=await (0,u.pV)(e.workID,r,f);return{...e,title:a.title,floor:null==(o=a.location)?void 0:o.floor,room:null==(t=a.location)?void 0:t.room}}catch(r){return e}}));j(o)}catch(e){m.errorTracker.report(e instanceof Error?e:Error(String(e)),{errorCode:m.F4.FILE_READ_ERROR,component:"FavoritesPage",action:"loadFavorites"})}finally{F(!1)}},[r,f]);(0,a.useEffect)(()=>{N()},[N]);let R=(0,a.useCallback)(()=>{o.back()},[o]),E=(0,a.useCallback)(async(e,r)=>{r.stopPropagation();try{await (0,k.dw)(e),await N()}catch(e){m.errorTracker.report(e instanceof Error?e:Error(String(e)),{errorCode:m.F4.FILE_WRITE_ERROR,component:"FavoritesPage",action:"toggleFavorite"})}},[N]),I=(0,a.useCallback)(async e=>{try{let o=await (0,u.pV)(e.workID,r,f),t={id:e.workID,title:e.title,thumbnail:e.thumbnail,exhibitionID:e.exhibitionID||o.exhibitionID,exhibitionName:e.exhibitionName||o.exhibitionName,floor:e.floor,room:e.room,has3DModel:o.has3DModel,contents:o.contents,contentVersionType:x},a=e.exhibitionID||o.exhibitionID;if(a)try{let t=await (0,C.nW)(a,r,f),i=t.workCategories.flatMap(e=>e.works);if(i.length>0){let r=e.exhibitionName||o.exhibitionName||t.basicInfo.title,n=y(i,{exhibitionID:a,exhibitionName:r}),l=n.findIndex(r=>r.id===e.workID);if(-1!==l){n[l]={...n[l],contents:o.contents},g(n,l),h(t.workCategories),w(n[l]);return}}}catch(e){m.vF.warn("[FavoritesPage] Failed to load exhibition, using single track",{exhibitionID:a,error:e})}g([t],0),w(t)}catch(e){m.errorTracker.report(e instanceof Error?e:Error(String(e)),{errorCode:m.sc.DATA_LOAD_ERROR,component:"FavoritesPage",action:"playFavoriteWork"})}},[r,f,x,y,w,g,h]);return(0,t.jsxs)("div",{className:p().favoritesPage,children:[(0,t.jsx)(c.A,{title:e("personal.favorites"),variant:"default",showBackArrow:!0,showBack:!1,showRight:!0,rightButtonType:"help",onBackClick:R}),(0,t.jsx)("div",{className:"".concat(p().content," ").concat(S&&v?p()["content--withMiniPlayer"]:""),children:P?(0,t.jsx)("div",{className:p().loading,children:(0,t.jsx)("p",{children:e("personal.loading")})}):0===b.length?(0,t.jsx)("div",{className:p().empty,children:(0,t.jsx)(s.U,{isEmpty:!0,size:"large",emptyText:e("personal.noFavorites")})}):(0,t.jsx)("div",{className:p().grid,children:b.map(e=>(0,t.jsx)(s.U,{size:"large",image:e.thumbnail,title:e.title,location:{floor:e.floor||"2F",room:e.room||"080"},onClick:()=>I(e),onFavoriteClick:r=>E(e.workID,r)},e.workID))})})]})};g.displayName="FavoritesPage"}},e=>{e.O(0,[4676,2468,1044,4772,4730,6208,4576,4078,1778,9402,5510,7358],()=>e(e.s=1201)),_N_E=e.O()}]);