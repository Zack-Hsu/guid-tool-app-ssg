(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4078],{3851:e=>{e.exports={customImage:"CustomImage_customImage__laLtp"}},28353:(e,i,a)=>{"use strict";a.d(i,{EZ:()=>g,LY:()=>_,pV:()=>m});var n=a(40014),t=a(26945),o=a(41114),l=a(28404),r=a(85110),u=a(91765),d=a(47077);let c="workService",s="work";async function m(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zh-TW",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"adult";if(await (0,r.j1)()){u.vF.debug("[".concat(c,"] Using offline mode"),{workID:e,locale:i,version:a});let t=await (0,l.Q0)(e,i,a);if(!t)throw Error("離線模式下無法取得作品資料（ID: ".concat(e,"），請確認已下載離線資料包"));return u.vF.debug("[".concat(c,"] Package data found"),{workID:e,hasExhibitionUid:!!t.exhibition_uid,exhibitionUid:t.exhibition_uid,exhibitionName:t.exhibition_name}),(0,n.Dm)(t,a)}let m=(0,o.lM)("".concat(s,"_").concat(e),i,a),g=await (0,d.$4)(i,a),_=t.Sn.WORK_DETAIL(e,{venue_uid:g,lang:i,content_type:a}),v=await (0,o.If)({endpoint:_,storageKey:m,serviceName:c,errorMessage:"無法取得作品資料（ID: ".concat(e,"），請檢查網路連線")});return(0,n.Dm)(v,a)}async function g(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zh-TW",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"adult",l=(0,o.lM)("".concat(s,"_").concat(e),i,a),r=await (0,d.$4)(i,a),u=t.Sn.WORK_DETAIL(e,{venue_uid:r,lang:i,content_type:a}),c=await (0,o.K)({endpoint:u,storageKey:l});return(0,n.Dm)(c,a)}async function _(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zh-TW",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"adult",n=(0,o.lM)("".concat(s,"_").concat(e),i,a);await (0,o.LH)(n)}},39660:(e,i,a)=>{"use strict";a.d(i,{$:()=>h});var n=a(81556),t=a(47256),o=a(42836),l=a(93171),r=a.n(l),u=a(34739),d=a(52728),c=a(87065),s=a.n(c);let m=t.forwardRef((e,i)=>{let{ratio:a="1:1",className:t,style:o,"aria-label":l,...c}=e,m=(0,u.c3)("common");return(0,n.jsx)("div",{ref:i,className:r()(s().imagePlaceholder,s()["ratio-".concat(a)],t),style:o,role:"img","aria-label":l||m("imagePlaceholder"),"data-ratio":a,...c,children:(0,n.jsx)("div",{className:s().content,children:(0,n.jsx)(d.z5.Outline,{className:s().icon})})})});m.displayName="ImagePlaceholder";var g=a(3226),_=a(3851),v=a.n(_);let h=t.forwardRef((e,i)=>{let{ratio:a="1:1",onError:l,className:d,placeholderClassName:c,forcePlaceholder:s=!1,enableOffline:_=!0,lightweight:h=!1,alt:f,src:p,width:b,height:I,style:w,...D}=e,[y,x]=(0,t.useState)(s),N=(0,u.c3)("common");(0,t.useEffect)(()=>{x(s)},[p,s]);let k="string"==typeof p?p:"",{src:E,isLoading:M}=(0,g.WC)(_?k:null),L=_&&E?E:p,P=()=>{x(!0),null==l||l()};return _&&M?(0,n.jsx)(m,{ratio:a,className:r()(c,d),"aria-label":f||N("loading")}):y?(0,n.jsx)(m,{ratio:a,className:r()(c,d),"aria-label":f||N("imageLoadFailed")}):h?(0,n.jsx)("img",{ref:i,className:r()(v().customImage,d),alt:f||"",src:"string"==typeof L?L:"",width:"number"==typeof b?b:void 0,height:"number"==typeof I?I:void 0,style:{objectFit:"cover",...w},onError:P,loading:"lazy"}):(0,n.jsx)(o.default,{ref:i,className:r()(v().customImage,d),alt:f,src:L,width:b,height:I,style:w,onError:P,...D})});h.displayName="CustomImage"},40014:(e,i,a)=>{"use strict";a.d(i,{DJ:()=>t,Dm:()=>o});var n=a(55587);function t(e){switch(e){case"sign_language":return"sign_language";case"audio_description":return"audio_description";default:return"audio"}}function o(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"adult",a=t(i),o=[];switch(a){case"sign_language":e.media_sign_language_guidances&&e.media_sign_language_guidances.forEach(e=>{o.push(...e.video_files.map(i=>({id:e.id,type:"sign_language",url:i.url,duration:Math.floor(i.duration/1e3),status:"available",audioName:e.name,transcription:void 0})))});break;case"audio_description":e.media_audio_descriptions&&e.media_audio_descriptions.forEach(e=>{o.push(...e.audio_files.map(i=>{var a;return{id:e.id,type:"audio_description",url:i.url,duration:Math.floor(i.duration/1e3),status:"available",audioName:e.name,transcription:null!=(a=i.transcript)?a:void 0}}))});break;default:e.media_audio_guidances&&e.media_audio_guidances.forEach(e=>{o.push(...e.audio_files.map(i=>{var a,n;return{id:e.id,type:"audio",url:i.url,duration:Math.floor(i.duration/1e3),status:"available",subtitleUrl:null!=(a=i.caption_url)?a:void 0,audioName:e.name,transcription:null!=(n=i.transcript)?n:void 0}}))})}let l=e.medias.map(n.eN);return{id:e.uid,number:e.exhibit_number,title:e.name,description:e.description,images:l,location:function(e){var i;let a=e.venue_location,t=a.name,o=(null==(i=a.spaces[0])?void 0:i.name)||"";return{floor:t,room:o,roomName:o,description:(0,n.Aw)(a),coordinates:function(e){if(e)return{x:e.x,y:e.y}}(e.map_location)}}(e),contents:o,contentVersionType:a,model3D:function(e){if(!e.model_3ds||0===e.model_3ds.length)return;let i=e.model_3ds[0];if(!i.model_files||0===i.model_files.length)return;let a=i.model_files[0];if(a)return{id:i.id,url:a.url,fileSize:void 0,status:"available"}}(e),has3DModel:e.model_3ds&&e.model_3ds.length>0,exhibitionID:e.exhibition_uid,exhibitionName:e.exhibition_name}}},55587:(e,i,a)=>{"use strict";function n(e){var i,a,n;let t=null==(i=e.info)?void 0:i[0];return(null==t||null==(n=t.media_sources)||null==(a=n[0])?void 0:a.url)?t.media_sources[0].url:(null==t?void 0:t.value)||""}function t(e){var i;let a=(null==(i=e.spaces[0])?void 0:i.name)||"";return"".concat(e.name," ").concat(a).trim()}function o(e){if(!e||0===e.length)return{id:void 0,duration:void 0,url:void 0};let i=e[0],a=i.audio_files[0];return{id:i.id,duration:(null==a?void 0:a.duration)?Math.floor(a.duration/1e3):void 0,url:null==a?void 0:a.url}}function l(e){if(!e||0===e.length)return{id:void 0,duration:void 0,url:void 0};let i=e[0],a=i.video_files[0];return{id:i.id,duration:(null==a?void 0:a.duration)?Math.floor(a.duration/1e3):void 0,url:null==a?void 0:a.url}}function r(e){if(!e||0===e.length)return{id:void 0,duration:void 0,url:void 0};let i=e[0],a=i.audio_files[0];return{id:i.id,duration:(null==a?void 0:a.duration)?Math.floor(a.duration/1e3):void 0,url:null==a?void 0:a.url}}function u(e){if(!e||0===e.length)return;let i=e[0],a=i.name,n=i.spaces.map(e=>e.name).filter(Boolean);return 0===n.length?a:"".concat(a," ").concat(n.join("、"))}function d(e){return({adult_student:"成人、學生團體",kids_family:"親子、兒童"})[e]}function c(e){if(!e||0===e.length)return;if(1===e.length)return u(e);let i=[];for(let a of e){let e=a.name,n=a.spaces.map(e=>e.name).filter(Boolean);n.length>0?i.push("".concat(e," ").concat(n.join("、"))):e&&i.push(e)}return i.join("、")||void 0}a.d(i,{Aw:()=>t,Ce:()=>c,Ru:()=>o,bB:()=>u,e1:()=>l,eN:()=>n,hT:()=>d,r8:()=>r})},87065:e=>{e.exports={imagePlaceholder:"ImagePlaceholder_imagePlaceholder__Ha497",content:"ImagePlaceholder_content__IMMzT",icon:"ImagePlaceholder_icon__5tpB1","ratio-1:1":"ImagePlaceholder_ratio-1__1__q8IMK","ratio-3:4":"ImagePlaceholder_ratio-3__4__ru6Up","ratio-21:9":"ImagePlaceholder_ratio-21__9__tJoc8","ratio-2:1":"ImagePlaceholder_ratio-2__1__bpZGE"}},93257:(e,i,a)=>{"use strict";a.d(i,{JJ:()=>h,nW:()=>_,_A:()=>v});var n=a(55587),t=a(91765);function o(e){var i,a,o,l,r;let u=e.venue_location,d=u.name,c=(null==(i=u.spaces[0])?void 0:i.name)||"",s=null==(a=u.spaces[0])?void 0:a.uid,m=(0,n.Ru)(e.media_audio_guidances),g=(0,n.e1)(e.media_sign_language_guidances),_=(0,n.r8)(e.media_audio_descriptions);t.vF.debug("[transformExhibitionWork] Media info",{workId:e.uid,workName:e.name,hasAudio:!!m.url,hasSignLanguage:!!g.url,hasAudioDescription:!!_.url,signLanguageGuidancesCount:null!=(r=null==(o=e.media_sign_language_guidances)?void 0:o.length)?r:0,signLanguageUrl:null==(l=g.url)?void 0:l.substring(0,50)});let v=e.map_location?{x:e.map_location.x,y:e.map_location.y}:void 0;return{workID:e.uid,image:e.medias[0]?(0,n.eN)(e.medias[0]):"",title:e.name,floor:d,room:c,location:(0,n.Aw)(u),audioDuration:m.duration,audioUrl:m.url,audioContentID:m.id,signLanguageDuration:g.duration,signLanguageUrl:g.url,signLanguageContentID:g.id,audioDescriptionDuration:_.duration,audioDescriptionUrl:_.url,audioDescriptionContentID:_.id,has3DModel:e.model_3ds&&e.model_3ds.length>0,mapLocation:v,spaceUid:s}}function l(e){var i,a;if("video"!==e.type)return;let n=null==(i=e.info)?void 0:i[0],t=null==n||null==(a=n.media_sources)?void 0:a[0],o=(null==t?void 0:t.url)||(null==n?void 0:n.value);if(o)return{videoURL:o,thumbnail:o,title:e.name}}function r(e){let i=e.works||[],a={categoryID:"all",categoryName:"全部展品",works:i.map(o)},t=i.slice(0,5).map(o);return{basicInfo:function(e){var i;let a=e.venue_locations[0],t=(null==a?void 0:a.name)||"",o=(null==a||null==(i=a.spaces[0])?void 0:i.name)||"",r=e.medias.map(l).filter(e=>void 0!==e),u=[];for(let i of e.venue_locations)for(let e of i.spaces)u.push({uid:e.uid,name:e.name,areaUid:i.uid,areaName:i.name});let d=(0,n.Ce)(e.venue_locations);return{exhibitionID:e.uid,title:e.name,bannerImage:(0,n.eN)(e.img_key_vision),startDate:e.start_date?new Date(e.start_date):void 0,endDate:e.end_date?new Date(e.end_date):void 0,floor:t,room:o,location:d||(a?(0,n.Aw)(a):void 0),description:e.description,videos:r.length>0?r:void 0,spaces:u.length>0?u:void 0}}(e),workCategories:i.length>0?[a]:[],featuredWorks:t}}var u=a(26945),d=a(41114),c=a(28404),s=a(85110);let m="exhibitionService",g="exhibition";async function _(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zh-TW",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"adult";if(await (0,s.j1)()){var n,o;t.vF.debug("[".concat(m,"] Using offline mode"),{exhibitionID:e,locale:i,version:a});let l=await (0,c.iL)(e,i,a);if(!l)throw Error("離線模式下無法取得展覽資料（ID: ".concat(e,"），請確認已下載離線資料包"));return t.vF.debug("[".concat(m,"] Package data loaded"),{exhibitionID:e,hasWorks:!!l.works,worksCount:null!=(o=null==(n=l.works)?void 0:n.length)?o:0}),r(l)}let l=(0,d.lM)("".concat(g,"_").concat(e),i,a),_=u.Sn.EXHIBITION_DETAIL(e,{lang:i,content_type:a});return r(await (0,d.If)({endpoint:_,storageKey:l,serviceName:m,errorMessage:"無法取得展覽資料（ID: ".concat(e,"），請檢查網路連線")}))}async function v(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zh-TW",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"adult",n=(0,d.lM)("".concat(g,"_").concat(e),i,a),t=u.Sn.EXHIBITION_DETAIL(e,{lang:i,content_type:a});return r(await (0,d.K)({endpoint:t,storageKey:n}))}async function h(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zh-TW",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"adult",n=(0,d.lM)("".concat(g,"_").concat(e),i,a);await (0,d.LH)(n)}}}]);