(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[443],{10731:a=>{a.exports={cardFooterContent:"CardFooterContent_cardFooterContent__ifhn0",cardFooterContent__icon:"CardFooterContent_cardFooterContent__icon__Z20gW",cardFooterContent__time:"CardFooterContent_cardFooterContent__time__wa8IZ",cardFooterContent__progressBar:"CardFooterContent_cardFooterContent__progressBar__Vs7SH",cardFooterContent__playingText:"CardFooterContent_cardFooterContent__playingText__SSoOM",cardFooterContent__readingText:"CardFooterContent_cardFooterContent__readingText__Z4RIR","cardFooterContent--default":"CardFooterContent_cardFooterContent--default__g3Njh","cardFooterContent--has-played":"CardFooterContent_cardFooterContent--has-played__1jeb9","cardFooterContent--playing":"CardFooterContent_cardFooterContent--playing__FH0FZ","cardFooterContent--reading":"CardFooterContent_cardFooterContent--reading__CEST8"}},13989:a=>{a.exports={artworkCard:"ArtworkCard_artworkCard__T9VD_","artworkCard--clickable":"ArtworkCard_artworkCard--clickable__mi3AN","artworkCard--playing":"ArtworkCard_artworkCard--playing__v7vVm",artworkCard__title:"ArtworkCard_artworkCard__title__FQzux",artworkCard__imageWrapper:"ArtworkCard_artworkCard__imageWrapper__RQDFt",artworkCard__image:"ArtworkCard_artworkCard__image__ysWOs",artworkCard__body:"ArtworkCard_artworkCard__body__Dzhmv",artworkCard__header:"ArtworkCard_artworkCard__header__jGJbF",artworkCard__locationText:"ArtworkCard_artworkCard__locationText__jSFyL",artworkCard__footer:"ArtworkCard_artworkCard__footer__Cr7MM",artworkCard__extraIcon:"ArtworkCard_artworkCard__extraIcon__cJUzy"}},27362:a=>{a.exports={mapPopup:"MapPopup_mapPopup__4AMzv",mapPopup__container:"MapPopup_mapPopup__container__jU5vO",mapPopup__header:"MapPopup_mapPopup__header__awP3h",mapPopup__headerContent:"MapPopup_mapPopup__headerContent__s__xN",mapPopup__title:"MapPopup_mapPopup__title__rvOXU",mapPopup__closeButton:"MapPopup_mapPopup__closeButton__oSQh_",mapPopup__floorTabs:"MapPopup_mapPopup__floorTabs__4FsPW",mapPopup__mapContainer:"MapPopup_mapPopup__mapContainer__APJTc",mapPopup__map:"MapPopup_mapPopup__map__JpogL",mapPopup__loading:"MapPopup_mapPopup__loading__lTh2_",mapPopup__error:"MapPopup_mapPopup__error__KxSTC",mapPopup__infoPanel:"MapPopup_mapPopup__infoPanel__64hFd",mapPopup__infoCard:"MapPopup_mapPopup__infoCard__grVQF",mapPopup__infoContent:"MapPopup_mapPopup__infoContent__HGk3m",mapPopup__infoRow:"MapPopup_mapPopup__infoRow__2_WaQ",mapPopup__infoLabel:"MapPopup_mapPopup__infoLabel__dpYij",mapPopup__infoValue:"MapPopup_mapPopup__infoValue__PZXOU"}},28016:(a,o,e)=>{"use strict";e.d(o,{t:()=>_});var r=e(81556);e(47256);var t=e(39660),n=e(93171),i=e.n(n),l=e(95165),d=e(52728),s=e(13989),p=e.n(s);let _=a=>{let{image:o,title:e,location:n,status:s="default",hasAudio:_=!0,extraIcon:c=null,duration:u="1:22",remainingTime:m="0:56",progress:C=50,onClick:k,onExtraIconClick:h,className:w="",imageAlt:x}=a,v="".concat(n.floor," ").concat(n.rooms.join("、")),g=a=>{a.stopPropagation(),h&&c&&h(c)};return(0,r.jsxs)("div",{className:i()(p().artworkCard,{[p()["artworkCard--playing"]]:"playing"===s,[p()["artworkCard--hasPlayed"]]:"has-played"===s,[p()["artworkCard--clickable"]]:!!k},w),onClick:k,role:k?"button":void 0,tabIndex:k?0:void 0,onKeyDown:a=>{k&&("Enter"===a.key||" "===a.key)&&(a.preventDefault(),k())},children:[(0,r.jsx)("div",{className:p().artworkCard__imageWrapper,children:(0,r.jsx)(t.$,{src:o,alt:x||e,width:96,height:96,className:p().artworkCard__image,style:{objectFit:"cover"},lightweight:!0})}),(0,r.jsxs)("div",{className:p().artworkCard__body,children:[(0,r.jsxs)("div",{className:p().artworkCard__header,children:[(0,r.jsx)("span",{className:p().artworkCard__locationText,children:v}),(0,r.jsx)("h3",{className:p().artworkCard__title,children:e})]}),(0,r.jsxs)("div",{className:p().artworkCard__footer,children:[(_||"reading"===s)&&(0,r.jsx)(l.$,{status:s,duration:u,remainingTime:m,progress:C}),(()=>{if(!c)return null;let a="3d"===c?(0,r.jsx)(d.F6,{size:20,color:"gray","aria-hidden":"true"}):(0,r.jsx)(d.YY.Outline,{size:20,color:"gray","aria-hidden":"true"});return k?(0,r.jsx)("div",{className:p().artworkCard__extraIcon,onClick:g,"aria-hidden":"true",children:a}):(0,r.jsx)("button",{className:p().artworkCard__extraIcon,onClick:g,"aria-label":"3d"===c?"查看 3D 模型":"閱讀文章",type:"button",children:a})})()]})]})]})};_.displayName="ArtworkCard"},35335:a=>{a.exports={groupTitle:"GroupTitle_groupTitle__QNB64",groupTitle__text:"GroupTitle_groupTitle__text__vkNO1"}},66949:(a,o,e)=>{"use strict";e.d(o,{D:()=>k});var r=e(81556),t=e(47256),n=e(34739),i=e(83678),l=e(13064),d=e(22391),s=e(27457),p=e(52728),_=e(69036),c=e(79785),u=e(62449),m=e(27362),C=e.n(m);let k=a=>{let{visible:o,onClose:e,mode:m="work",focusedWork:k,exhibition:h,locationText:w,selectedWorkId:x,onWorkClick:v,onWorkActionClick:g,className:P}=a,f=(0,n.c3)("map"),N=(0,n.c3)("common"),{data:b,loading:j,error:F}=(0,_.K)(),[U,y]=(0,t.useState)(""),[M,I]=(0,t.useState)(null),T="exhibition"===m||"tour"===m,A=(0,t.useMemo)(()=>(null==h?void 0:h.works.map(a=>({workID:a.workId})))||[],[null==h?void 0:h.works]),{playingWorkId:W,panelHeight:S,bottomOffset:z,onHeightChange:L,mapBackgroundColor:D,handleMapImageLoad:O,selectedWorkId:B,setSelectedWorkId:R}=(0,c.P)({works:A,enablePlayingSync:!1,externalSelectedWorkId:x}),G=null!=x?x:B,V=null==b?void 0:b.areas,E=(0,t.useMemo)(()=>{if(!V)return[];let a=(a,o)=>a.uid===o||a.name===o;return"work"===m&&(null==k?void 0:k.areaUid)?V.filter(o=>a(o,k.areaUid)):T&&(null==h?void 0:h.areaUids.length)?(0,u.g6)(V.filter(o=>h.areaUids.some(e=>a(o,e)))):[]},[V,m,T,null==k?void 0:k.areaUid,null==h?void 0:h.areaUids]);(0,t.useEffect)(()=>{E.length>0&&!U&&y(E[0].uid)},[E,U]),(0,t.useEffect)(()=>{o||(y(""),R(null),I(null))},[o,R]);let Q=(0,t.useMemo)(()=>E.find(a=>a.uid===U),[E,U]),H=(0,t.useMemo)(()=>{var a,o,e,r,t,n,i,l;return(null==Q||null==(t=Q.img_map)||null==(r=t.info)||null==(e=r[0])||null==(o=e.media_sources)||null==(a=o[0])?void 0:a.url)?Q.img_map.info[0].media_sources[0].url:(null==Q||null==(l=Q.img_map)||null==(i=l.info)||null==(n=i[0])?void 0:n.value)||""},[Q]),Z=(0,t.useMemo)(()=>(null==Q?void 0:Q.spaces)?(null==h?void 0:h.spaceUids)?Q.spaces.filter(a=>h.spaceUids.includes(a.uid)).map(a=>({...a,exhibitionUid:h.exhibitionId,exhibitionName:h.exhibitionName,areaColor:h.areaColor||"rgba(221, 181, 134, 0.3)"})):"work"===m&&(null==k?void 0:k.spaceUid)?Q.spaces.filter(a=>a.uid===k.spaceUid).map(a=>({...a,exhibitionUid:k.workId,exhibitionName:void 0,areaColor:"rgba(221, 181, 134, 0.3)"})):[]:[],[null==Q?void 0:Q.spaces,m,h,k]),J=(0,t.useMemo)(()=>"work"===m&&k?[{workId:k.workId,title:k.title,imageUrl:k.imageUrl,hasAudio:k.hasAudio,mapLocation:k.mapLocation,spaceUid:k.spaceUid}]:T&&(null==h?void 0:h.works)&&Q?h.works.filter(a=>a.areaUid===Q.uid||a.areaUid===Q.name).map(a=>({workId:a.workId,title:a.title,imageUrl:a.imageUrl,hasAudio:a.hasAudio,mapLocation:a.mapLocation,spaceUid:a.spaceUid})):[],[m,T,k,null==h?void 0:h.works,Q]),K=(0,t.useMemo)(()=>T&&(null==h?void 0:h.works)&&Q?h.works.filter(a=>!!a.areaUid&&(a.areaUid===Q.uid||a.areaUid===Q.name)).map(a=>{var o;return{workID:a.workId,title:a.title,image:a.imageUrl||"",floor:Q.name||"",room:(null==(o=Z.find(o=>o.uid===a.spaceUid))?void 0:o.name)||"",location:"",hasAudio:a.hasAudio,mapLocation:a.mapLocation,spaceUid:a.spaceUid}}):[],[T,null==h?void 0:h.works,Q,Z]),Y=(0,t.useMemo)(()=>{if("work"===m&&(null==k?void 0:k.spaceUid))return k.spaceUid;if(T&&M)return M;if(T&&G){let a=null==h?void 0:h.works.find(a=>a.workId===G);return(null==a?void 0:a.spaceUid)||null}return T&&(null==h?void 0:h.spaceUids.length)===1?h.spaceUids[0]:null},[m,T,null==k?void 0:k.spaceUid,M,G,null==h?void 0:h.works,null==h?void 0:h.spaceUids]),$=(0,t.useMemo)(()=>"work"===m&&(null==k?void 0:k.workId)?k.workId:T?G:null,[m,T,null==k?void 0:k.workId,G]),X=(0,t.useCallback)(()=>{e()},[e]),q=(0,t.useCallback)(a=>{R(a.workID),a.spaceUid&&I(a.spaceUid),null==v||v(a)},[v,R]),aa=(0,t.useCallback)(a=>{R(a.workID),a.spaceUid&&I(a.spaceUid),null==g||g(a)},[g,R]),ao=(0,t.useCallback)(a=>{if(!a)return void R(null);R(a);let o=K.find(o=>o.workID===a);o&&(o.spaceUid&&I(o.spaceUid),null==v||v(o))},[K,v,R]),ae=(0,t.useCallback)(a=>{T&&(I(a.uid),R(null))},[T,R]),ar=(0,t.useMemo)(()=>{if(null==k?void 0:k.spaceUid){let a=Z.find(a=>a.uid===k.spaceUid);return(null==a?void 0:a.name)||""}return""},[null==k?void 0:k.spaceUid,Z]),at=(0,t.useMemo)(()=>T?Z.map(a=>a.name):[],[T,Z]),an=w||(Q?"".concat(Q.name," ").concat(ar).trim():""),ai=f("tour"===m?"tour":"exhibition"),al=E.length>1;return(0,r.jsx)(i.zD,{visible:o,onClose:X,position:"bottom",destroyOnClose:!0,bodyClassName:"".concat(C().mapPopup," ").concat(P||""),children:(0,r.jsxs)("div",{className:C().mapPopup__container,children:[(0,r.jsxs)("div",{className:C().mapPopup__header,children:[(0,r.jsx)("div",{className:C().mapPopup__headerContent,children:(0,r.jsx)("span",{className:C().mapPopup__title,children:f("viewLocation")})}),(0,r.jsx)("button",{className:C().mapPopup__closeButton,onClick:X,"aria-label":N("close"),children:(0,r.jsx)(p.gz,{size:24,color:"white"})})]}),(0,r.jsxs)("div",{className:"".concat(C().mapPopup__mapContainer," ").concat("work"===m?C()["mapPopup__mapContainer--work"]:""),style:D?{backgroundColor:D}:void 0,children:[j&&(0,r.jsx)("div",{className:C().mapPopup__loading,children:(0,r.jsx)("p",{children:N("loading")})}),F&&(0,r.jsx)("div",{className:C().mapPopup__error,children:(0,r.jsx)("p",{children:N("error")})}),!j&&!F&&H&&(0,r.jsx)(l.R,{imageUrl:H,imageAlt:(null==Q?void 0:Q.name)||f("mapAlt"),spaces:Z,selectedSpaceUid:Y,workMarkers:J,selectedWorkId:$,zoomToSelected:!0,zoomToSelectedWork:"work"===m||T,enableGestures:!0,bottomOffset:T?z:0,showAllBoundaries:!1,defaultAreaColor:"rgba(221, 181, 134, 0.3)",selectedAreaColor:"rgba(221, 181, 134, 0.3)",borderColor:"rgba(221, 181, 134, 0.6)",onSpaceClick:T?ae:void 0,onWorkMarkerClick:T?ao:void 0,onImageLoad:O,className:C().mapPopup__map,style:D?{backgroundColor:D}:void 0})]}),"work"===m&&((null==h?void 0:h.exhibitionName)||an)&&(0,r.jsx)("div",{className:C().mapPopup__infoPanel,children:(0,r.jsx)("div",{className:C().mapPopup__infoCard,children:(0,r.jsxs)("div",{className:C().mapPopup__infoContent,children:[(null==h?void 0:h.exhibitionName)&&(0,r.jsxs)("div",{className:C().mapPopup__infoRow,children:[(0,r.jsx)("span",{className:C().mapPopup__infoLabel,children:f("exhibition")}),(0,r.jsx)("span",{className:C().mapPopup__infoValue,children:h.exhibitionName})]}),an&&(0,r.jsxs)("div",{className:C().mapPopup__infoRow,children:[(0,r.jsx)("span",{className:C().mapPopup__infoLabel,children:f("location")}),(0,r.jsx)("span",{className:C().mapPopup__infoValue,children:an})]})]})})}),al&&(0,r.jsx)("div",{className:C().mapPopup__floorTabs,style:{bottom:S+16},children:(0,r.jsx)(s.Y,{items:E.map(a=>({key:a.uid,title:a.name})),activeKey:U,onChange:a=>{y(a),I(null),R(null)}})}),T&&h&&(0,r.jsx)(d.n,{visible:!0,exhibition:{uid:h.exhibitionId,name:h.exhibitionName},works:K,currentFloorName:(null==Q?void 0:Q.name)||"",spaceNames:at,selectedWorkId:G,playingWorkId:W,onWorkClick:q,onWorkActionClick:aa,onHeightChange:L,showGoToExhibitionButton:!1,labelText:ai,className:C().mapPopup__floatingPanel})]})})};k.displayName="MapPopup"},95165:(a,o,e)=>{"use strict";e.d(o,{$:()=>s});var r=e(81556);e(47256);var t=e(34739),n=e(83678),i=e(52728),l=e(10731),d=e.n(l);let s=a=>{let{status:o="default",duration:e="1:22",remainingTime:l="0:56",progress:s=50,className:p=""}=a,_=(0,t.c3)("workCard"),c=[d().cardFooterContent,d()["cardFooterContent--".concat(o)],p].filter(Boolean).join(" ");return"default"===o?(0,r.jsxs)("div",{className:c,"data-status":"default",children:[(0,r.jsx)(i.UG.Outline,{color:"white",size:12,className:d().cardFooterContent__icon}),(0,r.jsx)("span",{className:d().cardFooterContent__time,children:e})]}):"has-played"===o?(0,r.jsxs)("div",{className:c,"data-status":"has-played",children:[(0,r.jsx)(i.UG.Outline,{color:"white",size:12,className:d().cardFooterContent__icon}),(0,r.jsx)(n.z2,{percent:s,className:d().cardFooterContent__progressBar,style:{"--track-width":"3px","--track-color":"rgba(196, 196, 196, 0.5)","--fill-color":"var(--scheme-on-secondary-container)"}}),(0,r.jsxs)("span",{className:d().cardFooterContent__time,children:[(0,r.jsx)("span",{children:_("separator")}),(0,r.jsx)("span",{children:l})]})]}):"playing"===o?(0,r.jsxs)("div",{className:c,"data-status":"playing",children:[(0,r.jsx)(i.AW,{color:"gold",size:12,className:d().cardFooterContent__icon}),(0,r.jsx)("span",{className:d().cardFooterContent__playingText,children:_("playing")})]}):"reading"===o?(0,r.jsxs)("div",{className:c,"data-status":"reading",children:[(0,r.jsx)("span",{className:d().cardFooterContent__time,children:e}),(0,r.jsx)("span",{className:d().cardFooterContent__readingText,children:_("estimatedReadingTime")})]}):null};s.displayName="CardFooterContent"},95612:(a,o,e)=>{"use strict";e.d(o,{U:()=>i});var r=e(81556);e(47256);var t=e(35335),n=e.n(t);let i=a=>{let{title:o,className:e}=a;return(0,r.jsx)("div",{className:"".concat(n().groupTitle," ").concat(e||""),children:(0,r.jsx)("h2",{className:n().groupTitle__text,children:o})})}}}]);