"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5618],{55618:(t,e,r)=>{let n,i,a,o,s,c;r.r(e),r.d(e,{FirebasePerformanceWeb:()=>tt});var l,u=r(40696),m=r(12536),p=r(63233),h=r(99629),d=r(83492);r(67780);let f="@firebase/performance",g="0.6.12",_="FB-PERF-TRACE-MEASURE",b="_wt_",v="_fcp",E="_fid",T="@firebase/performance/config",y="@firebase/performance/configexpire",w="Performance",N=new m.FA("performance",w,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),R=new p.Vy(w);R.logLevel=p.$b.INFO;class A{constructor(t){if(this.window=t,!t)throw N.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(t){this.performance&&this.performance.mark&&this.performance.mark(t)}measure(t,e,r){this.performance&&this.performance.measure&&this.performance.measure(t,e,r)}getEntriesByType(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]}getEntriesByName(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&(0,m.dM)()?!!(0,m.zW)()||(R.info("IndexedDB is not supported by current browser"),!1):(R.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(t,e){this.PerformanceObserver&&new this.PerformanceObserver(t=>{for(let r of t.getEntries())e(r)}).observe({entryTypes:[t]})}static getInstance(){return void 0===n&&(n=new A(i)),n}}function I(t,e){let r=t.length-e.length;if(r<0||r>1)throw N.create("invalid String merger input");let n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),e.length>r&&n.push(e.charAt(r));return n.join("")}class S{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=I("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=I("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===o&&(o=new S),o}}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(l||(l={}));let O=["firebase_","google_","ga_"],M=RegExp("^[a-zA-Z]\\w*$");function k(){switch(A.getInstance().document.visibilityState){case"visible":return l.VISIBLE;case"hidden":return l.HIDDEN;default:return l.UNKNOWN}}function U(t){var e;let r=null==(e=t.options)?void 0:e.appId;if(!r)throw N.create("no app id");return r}let C={loggingEnabled:!0};function F(t){if(!t)return t;let e=S.getInstance(),r=t.entries||{};return void 0!==r.fpr_enabled?e.loggingEnabled="true"===String(r.fpr_enabled):e.loggingEnabled=C.loggingEnabled,r.fpr_log_source?e.logSource=Number(r.fpr_log_source):C.logSource&&(e.logSource=C.logSource),r.fpr_log_endpoint_url?e.logEndPointUrl=r.fpr_log_endpoint_url:C.logEndPointUrl&&(e.logEndPointUrl=C.logEndPointUrl),r.fpr_log_transport_key?e.transportKey=r.fpr_log_transport_key:C.transportKey&&(e.transportKey=C.transportKey),void 0!==r.fpr_vc_network_request_sampling_rate?e.networkRequestsSamplingRate=Number(r.fpr_vc_network_request_sampling_rate):void 0!==C.networkRequestsSamplingRate&&(e.networkRequestsSamplingRate=C.networkRequestsSamplingRate),void 0!==r.fpr_vc_trace_sampling_rate?e.tracesSamplingRate=Number(r.fpr_vc_trace_sampling_rate):void 0!==C.tracesSamplingRate&&(e.tracesSamplingRate=C.tracesSamplingRate),e.logTraceAfterSampling=P(e.tracesSamplingRate),e.logNetworkAfterSampling=P(e.networkRequestsSamplingRate),t}function P(t){return Math.random()<=t}let D=1;function B(t){var e;return D=2,s=s||(e=t,(function(){let t=A.getInstance().document;return new Promise(e=>{if(t&&"complete"!==t.readyState){let r=()=>{"complete"===t.readyState&&(t.removeEventListener("readystatechange",r),e())};t.addEventListener("readystatechange",r)}else e()})})().then(()=>(function(t){let e=t.getId();return e.then(t=>{a=t}),e})(e.installations)).then(t=>(function(t,e){var r,n;let i=function(){let t=A.getInstance().localStorage;if(!t)return;let e=t.getItem(y);if(!e||!(Number(e)>Date.now()))return;let r=t.getItem(T);if(r)try{return JSON.parse(r)}catch(t){return}}();return i?(F(i),Promise.resolve()):(r=t,n=e,(function(t){let e=t.getToken();return e.then(t=>{}),e})(r.installations).then(t=>{let e=function(t){var e;let r=null==(e=t.options)?void 0:e.projectId;if(!r)throw N.create("no project id");return r}(r.app),i=function(t){var e;let r=null==(e=t.options)?void 0:e.apiKey;if(!r)throw N.create("no api key");return r}(r.app);return fetch(new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${e}/namespaces/fireperf:fetch?key=${i}`,{method:"POST",headers:{Authorization:`FIREBASE_INSTALLATIONS_AUTH ${t}`},body:JSON.stringify({app_instance_id:n,app_instance_id_token:t,app_id:U(r.app),app_version:g,sdk_version:"0.0.1"})})).then(t=>{if(t.ok)return t.json();throw N.create("RC response not ok")})}).catch(()=>{R.info("Could not fetch config, will use default configs")})).then(F).then(t=>(function(t){let e=A.getInstance().localStorage;t&&e&&(e.setItem(T,JSON.stringify(t)),e.setItem(y,String(Date.now()+60*S.getInstance().configTimeToLive*6e4)))})(t),()=>{})})(e,t)).then(()=>(function(){D=3})(),()=>(function(){D=3})()))}let $=3,q=[],L=!1;function j(t,e){c||(c=(...t)=>{var e={message:W(...t),eventTime:Date.now()};if(!e.eventTime||!e.message)throw N.create("invalid cc log");q=[...q,e]}),c(t,e)}function K(t){let e=S.getInstance();(e.instrumentationEnabled||!t.isAuto)&&(e.dataCollectionEnabled||t.isAuto)&&A.getInstance().requiredApisAvailable()&&(t.isAuto&&k()!==l.VISIBLE||(3===D?z(t):B(t.performanceController).then(()=>z(t),()=>z(t))))}function z(t){if(!a)return;let e=S.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout(()=>j(t,1),0)}function W(t,e){return 0===e?function(t){let e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs};return JSON.stringify({application_info:x(t.performanceController.app),network_request_metric:e})}(t):function(t){let e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);let r=t.getAttributes();return 0!==Object.keys(r).length&&(e.custom_attributes=r),JSON.stringify({application_info:x(t.performanceController.app),trace_metric:e})}(t)}function x(t){return{google_app_id:U(t),app_instance_id:a,web_app_info:{sdk_version:g,page_url:A.getInstance().getUrl(),service_worker_status:function(){let t=A.getInstance().navigator;return null!=t&&t.serviceWorker?t.serviceWorker.controller?2:3:1}(),visibility_state:k(),effective_connection_type:function(){let t=A.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0}}let V=["_fp",v,E];class J{constructor(t,e,r=!1,n){this.performanceController=t,this.name=e,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=A.getInstance(),this.randomId=Math.floor(1e6*Math.random()),!this.isAuto&&(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=n||`${_}-${this.randomId}-${this.name}`,n&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw N.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw N.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),K(this)}record(t,e,r){if(t<=0)throw N.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw N.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(let t of Object.keys(r.metrics))isNaN(Number(r.metrics[t]))||(this.counters[t]=Math.floor(Number(r.metrics[t])));K(this)}incrementMetric(t,e=1){void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)}putMetric(t,e){var r;if(r=this.name,0!==t.length&&!(t.length>100)&&(r&&r.startsWith(b)&&V.indexOf(t)>-1||!t.startsWith("_")))this.counters[t]=function(t){let e=Math.floor(t);return e<t&&R.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}(null!=e?e:0);else throw N.create("invalid custom metric name",{customMetricName:t})}getMetric(t){return this.counters[t]||0}putAttribute(t,e){let r=0!==t.length&&!(t.length>40)&&!O.some(e=>t.startsWith(e))&&!!t.match(M),n=0!==e.length&&e.length<=100;if(r&&n){this.customAttributes[t]=e;return}if(!r)throw N.create("invalid attribute name",{attributeName:t});if(!n)throw N.create("invalid attribute value",{attributeValue:e})}getAttribute(t){return this.customAttributes[t]}removeAttribute(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(t){this.startTimeUs=t}setDuration(t){this.durationUs=t}calculateTraceMetrics(){let t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor((e.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(t,e,r,n){let i=A.getInstance().getUrl();if(!i)return;let a=new J(t,b+i,!0),o=Math.floor(1e3*A.getInstance().getTimeOrigin());if(a.setStartTime(o),e&&e[0]&&(a.setDuration(Math.floor(1e3*e[0].duration)),a.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),a.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),a.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),r){let t=r.find(t=>"first-paint"===t.name);t&&t.startTime&&a.putMetric("_fp",Math.floor(1e3*t.startTime));let e=r.find(t=>"first-contentful-paint"===t.name);e&&e.startTime&&a.putMetric(v,Math.floor(1e3*e.startTime)),n&&a.putMetric(E,Math.floor(1e3*n))}K(a)}static createUserTimingTrace(t,e){K(new J(t,e,!1,e))}}function H(t,e){if(!e||void 0===e.responseStart)return;let r=A.getInstance().getTimeOrigin(),n=Math.floor((e.startTime+r)*1e3),i=e.responseStart?Math.floor((e.responseStart-e.startTime)*1e3):void 0,a=Math.floor((e.responseEnd-e.startTime)*1e3);!function(t){let e=S.getInstance();if(!e.instrumentationEnabled)return;let r=t.url,n=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];r!==n&&r!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(()=>j(t,0),0)}({performanceController:t,url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:n,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:a})}function X(t){a&&(setTimeout(()=>(function(t){let e=A.getInstance(),r=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{J.createOobTrace(t,r,n),i=void 0},5e3);e.onFirstInputDelay(e=>{i&&(clearTimeout(i),J.createOobTrace(t,r,n,e))})}else J.createOobTrace(t,r,n)})(t),0),setTimeout(()=>(function(t){let e=A.getInstance();for(let r of e.getEntriesByType("resource"))H(t,r);e.setupObserver("resource",e=>H(t,e))})(t),0),setTimeout(()=>(function(t){let e=A.getInstance();for(let r of e.getEntriesByType("measure"))G(t,r);e.setupObserver("measure",e=>G(t,e))})(t),0))}function G(t,e){let r=e.name;r.substring(0,_.length)!==_&&J.createUserTimingTrace(t,r)}class Q{constructor(t,e){this.app=t,this.installations=e,this.initialized=!1}_init(t){this.initialized||((null==t?void 0:t.dataCollectionEnabled)!==void 0&&(this.dataCollectionEnabled=t.dataCollectionEnabled),(null==t?void 0:t.instrumentationEnabled)!==void 0&&(this.instrumentationEnabled=t.instrumentationEnabled),A.getInstance().requiredApisAvailable()?(0,m.eX)().then(t=>{t&&(L||(function t(e){setTimeout(()=>{if(0!==$){if(!q.length)return t(1e4);!function(){var e,r,n;let i=q.splice(0,1e3),a=i.map(t=>({source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}));(e={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:S.getInstance().logSource,log_event:a},r=i,(n=e,fetch(S.getInstance().getFlTransportFullUrl(),{method:"POST",body:JSON.stringify(n)})).then(t=>(t.ok||R.info("Call to Firebase backend failed."),t.json())).then(e=>{let n=Number(e.nextRequestWaitMillis),i=1e4;isNaN(n)||(i=Math.max(n,i));let a=e.logResponseDetails;Array.isArray(a)&&a.length>0&&"RETRY_REQUEST_LATER"===a[0].responseAction&&(q=[...r,...q],R.info("Retry transport request later.")),$=3,t(i)})).catch(()=>{q=[...i,...q],$--,R.info(`Tries left: ${$}.`),t(1e4)})}()}},e)}(5500),L=!0),B(this).then(()=>X(this),()=>X(this)),this.initialized=!0)}).catch(t=>{R.info(`Environment doesn't support IndexedDB: ${t}`)}):R.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(t){S.getInstance().instrumentationEnabled=t}get instrumentationEnabled(){return S.getInstance().instrumentationEnabled}set dataCollectionEnabled(t){S.getInstance().dataCollectionEnabled=t}get dataCollectionEnabled(){return S.getInstance().dataCollectionEnabled}}function Y(t=(0,h.Sx)()){return t=(0,m.Ku)(t),(0,h.j6)(t,"performance").getImmediate()}function Z(t,e){return new J(t=(0,m.Ku)(t),e)}(0,h.om)(new d.uA("performance",(t,{options:e})=>{let r=t.getProvider("app").getImmediate(),n=t.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==r.name)throw N.create("FB not default");if("undefined"==typeof window)throw N.create("no window");i=window;let a=new Q(r,n);return a._init(e),a},"PUBLIC")),(0,h.KO)(f,g),(0,h.KO)(f,g,"esm2017");class tt extends u.E_{constructor(){super(...arguments),this.traces={}}async startTrace(t){let e=Z(Y(),t.traceName);e.start(),this.traces[t.traceName]=e}async stopTrace(t){let e=this.traces[t.traceName];if(!e)throw Error(tt.ERROR_TRACE_NOT_FOUND);e.stop(),delete this.traces[t.traceName]}async incrementMetric(t){let e=this.traces[t.traceName];if(!e)throw Error(tt.ERROR_TRACE_NOT_FOUND);e.incrementMetric(t.metricName,t.incrementBy)}async setEnabled(t){let e=Y();e.instrumentationEnabled=t.enabled,e.dataCollectionEnabled=t.enabled}async isEnabled(){let t=Y();return{enabled:t.instrumentationEnabled||t.dataCollectionEnabled}}async putAttribute({traceName:t,attribute:e,value:r}){let n=this.traces[t];if(!n)throw Error(tt.ERROR_TRACE_NOT_FOUND);n.putAttribute(e,r)}async getAttribute({traceName:t,attribute:e}){var r;let n=this.traces[t];if(!n)throw Error(tt.ERROR_TRACE_NOT_FOUND);return{value:null!=(r=n.getAttribute(e))?r:null}}async getAttributes({traceName:t}){let e=this.traces[t];if(!e)throw Error(tt.ERROR_TRACE_NOT_FOUND);return{attributes:e.getAttributes()}}async removeAttribute({traceName:t,attribute:e}){let r=this.traces[t];if(!r)throw Error(tt.ERROR_TRACE_NOT_FOUND);r.removeAttribute(e)}async putMetric({traceName:t,metricName:e,num:r}){let n=this.traces[t];if(!n)throw Error(tt.ERROR_TRACE_NOT_FOUND);n.putMetric(e,r)}async getMetric({traceName:t,metricName:e}){let r=this.traces[t];if(!r)throw Error(tt.ERROR_TRACE_NOT_FOUND);return{value:r.getMetric(e)}}async record({traceName:t,startTime:e,duration:r,options:n}){Z(Y(),t).record(e,r,n)}}tt.ERROR_TRACE_NOT_FOUND="No trace was found with the provided traceName."}}]);