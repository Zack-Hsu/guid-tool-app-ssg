(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[664],{1437:e=>{e.exports={workCardMap:"WorkCardMap_workCardMap__zLCDs","workCardMap--clickable":"WorkCardMap_workCardMap--clickable__njuvi","workCardMap--default":"WorkCardMap_workCardMap--default__0cXkr",workCardMap__headerGroup:"WorkCardMap_workCardMap__headerGroup__FRQ0w","workCardMap--selected":"WorkCardMap_workCardMap--selected__9HhoM","workCardMap--playing":"WorkCardMap_workCardMap--playing__Mm2Zo","workCardMap--selected-playing":"WorkCardMap_workCardMap--selected-playing__Ud4n1",workCardMap__imageContainer:"WorkCardMap_workCardMap__imageContainer___bNZi",workCardMap__image:"WorkCardMap_workCardMap__image__e9HdR",workCardMap__content:"WorkCardMap_workCardMap__content__wu0xh",workCardMap__tag:"WorkCardMap_workCardMap__tag___d_35",workCardMap__title:"WorkCardMap_workCardMap__title__JKCSl",workCardMap__actionButton:"WorkCardMap_workCardMap__actionButton__wRyAy"}},1776:e=>{e.exports={capsuleTabsWithIcon:"CapsuleTabsWithIcon_capsuleTabsWithIcon__kzco1",capsuleTabsWithIcon__header:"CapsuleTabsWithIcon_capsuleTabsWithIcon__header__TAg_g",capsuleTabsWithIcon__tabWrapper:"CapsuleTabsWithIcon_capsuleTabsWithIcon__tabWrapper__8IU_6",capsuleTabsWithIcon__tab:"CapsuleTabsWithIcon_capsuleTabsWithIcon__tab__OWnXM","capsuleTabsWithIcon__tab--active":"CapsuleTabsWithIcon_capsuleTabsWithIcon__tab--active__eOQ4H","capsuleTabsWithIcon__tab--disabled":"CapsuleTabsWithIcon_capsuleTabsWithIcon__tab--disabled__ZLYG7",capsuleTabsWithIcon__icon:"CapsuleTabsWithIcon_capsuleTabsWithIcon__icon__BqhFT","capsuleTabsWithIcon__tab--minimal":"CapsuleTabsWithIcon_capsuleTabsWithIcon__tab--minimal__GHFYI",capsuleTabsWithIcon__title:"CapsuleTabsWithIcon_capsuleTabsWithIcon__title__h4sv3",capsuleTabsWithIcon__content:"CapsuleTabsWithIcon_capsuleTabsWithIcon__content__xNO3L",capsuleTabsWithIcon__panel:"CapsuleTabsWithIcon_capsuleTabsWithIcon__panel__HLDN3"}},13064:(e,a,t)=>{"use strict";t.d(a,{R:()=>m});var n=t(81556),l=t(47256),i=t(39660),r=t(3226);let c={scale:1,translateX:0,translateY:0};function s(e,a){let t=e.clientX-a.clientX,n=e.clientY-a.clientY;return Math.sqrt(t*t+n*n)}function o(e,a){return{x:(e.clientX+a.clientX)/2,y:(e.clientY+a.clientY)/2}}function _(e,a,t){return Math.min(Math.max(e,a),t)}var u=t(22942),p=t.n(u);let d=e=>{let{imageUrl:a,title:t,popoverCounterScale:l}=e,{src:i}=(0,r.WC)(a);return(0,n.jsxs)("div",{className:"".concat(p().interactiveMap__workPopover," ").concat(p()["interactiveMap__workPopover--visible"]),style:{transform:"translateX(-50%) scale(".concat(l,")"),transformOrigin:"bottom center"},children:[(0,n.jsx)("div",{className:p().interactiveMap__workPopoverContent,children:(0,n.jsx)("img",{src:i||a,alt:t,className:p().interactiveMap__workPopoverImage})}),(0,n.jsx)("div",{className:p().interactiveMap__workPopoverArrow})]})};function h(e,a,t){return{x:(e.x+.5)*a,y:(e.y+.5)*t}}let m=e=>{let{imageUrl:a,imageAlt:t="Map",spaces:u,selectedSpaceUid:m,onSpaceClick:g,showAllBoundaries:v=!1,defaultAreaColor:b="rgba(186, 153, 114, 0.3)",selectedAreaColor:f="rgba(186, 153, 114, 0.6)",borderColor:M="rgba(186, 153, 114, 0.8)",zoomToSelected:k=!1,zoomLevel:w="auto",enableGestures:x=!1,minScale:y=1,maxScale:C=4,className:I="",style:P,onImageLoad:T,workMarkers:W=[],selectedWorkId:j,onWorkMarkerClick:F,zoomToSelectedWork:N=!1,bottomOffset:Y=0}=e,X=(0,l.useRef)(null),[S,B]=(0,l.useState)(null),E=(0,l.useRef)(void 0),L=(0,l.useRef)(void 0),R=(0,l.useRef)(0),D=(0,l.useRef)(!1),A=(0,l.useRef)(!1),{src:z}=(0,r.WC)(a),[H,O]=(0,l.useState)({width:1e3,height:1e3});(0,l.useEffect)(()=>{if(!z)return;let e=new Image;e.crossOrigin="anonymous",e.onload=()=>{if(O({width:e.naturalWidth,height:e.naturalHeight}),T)try{let a=document.createElement("canvas"),t=a.getContext("2d");if(t){a.width=e.naturalWidth,a.height=e.naturalHeight,t.drawImage(e,0,0);let n=t.getImageData(e.naturalWidth-1,e.naturalHeight-1,1,1).data,l="rgb(".concat(n[0],", ").concat(n[1],", ").concat(n[2],")");T(l)}else T(null)}catch(e){T(null)}},e.src=z},[z,T]);let U=H.width,G=H.height,[q,K]=(0,l.useState)({width:0,height:0});(0,l.useEffect)(()=>{if(!X.current)return;let e=()=>{X.current&&K({width:X.current.clientWidth,height:X.current.clientHeight})};e();let a=new ResizeObserver(e);return a.observe(X.current),()=>a.disconnect()},[]);let Z=(0,l.useMemo)(()=>{if("number"==typeof w)return w;if(!m)return 1;let e=u.find(e=>e.uid===m);return(null==e?void 0:e.map_boundary)&&!(e.map_boundary.length<3)?function(e,a,t,n,l){let i,r,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.15,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:4;if(e.length<3||a<=0||t<=0)return 1;let _=function(e){if(0===e.length)return{minX:0,maxX:0,minY:0,maxY:0,width:0,height:0};let a=1/0,t=-1/0,n=1/0,l=-1/0;for(let i of e)i.x<a&&(a=i.x),i.x>t&&(t=i.x),i.y<n&&(n=i.y),i.y>l&&(l=i.y);return{minX:a,maxX:t,minY:n,maxY:l,width:t-a,height:l-n}}(e),u=n/l;u>a/t?(i=a,r=a/u):(r=t,i=t*u);let p=_.width*i;return Math.max(1,Math.min(Math.min(a*(1-2*s)/p,(t-c)*(1-2*s)/(_.height*r)),o))}(e.map_boundary,q.width,q.height,H.width,H.height,Y,.15,C):1},[w,m,u,q,H,Y,C]),{transform:Q,setTransform:J,containerRef:$,getTransformStyle:V}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{minScale:a=1,maxScale:t=4,doubleTapScale:n=2,initialTransform:i=c,enabled:r=!0,onTransformChange:u}=e,[p,d]=(0,l.useState)(i),[h,m]=(0,l.useState)(!1),g=(0,l.useRef)(null),v=(0,l.useRef)({isDragging:!1,dragStartX:0,dragStartY:0,lastTranslateX:0,lastTranslateY:0,isPinching:!1,initialPinchDistance:0,pinchStartScale:1,pinchStartTranslateX:0,pinchStartTranslateY:0,lastPinchCenterX:0,lastPinchCenterY:0,lastTapTime:0,lastTapX:0,lastTapY:0}),b=(0,l.useRef)(null);(0,l.useRef)(p).current=p;let f=(0,l.useCallback)(e=>{d(e),null==u||u(e)},[u]),M=(0,l.useCallback)(()=>{f(i)},[i,f]),k=(0,l.useCallback)((e,a,t)=>{let n=50*t;return{x:_(e,-n,n),y:_(a,-n,n)}},[]),w=(0,l.useCallback)(e=>{if(!r)return;let a=e.touches,t=v.current;if(g.current&&(b.current=g.current.getBoundingClientRect()),1===a.length){let l=a[0],i=Date.now(),r=i-t.lastTapTime,c=l.clientX-t.lastTapX,s=l.clientY-t.lastTapY,o=Math.sqrt(c*c+s*s);if(r<300&&o<50){e.preventDefault();let a=p.scale>1?1:n;if(1===a)f({scale:1,translateX:0,translateY:0});else if(b.current){let e=b.current,t=e.left+e.width/2,n=e.top+e.height/2,i=(l.clientX-t)/e.width*100,r=k(i*(1-a),(l.clientY-n)/e.height*100*(1-a),a);f({scale:a,translateX:r.x,translateY:r.y})}else f({scale:a,translateX:0,translateY:0});t.lastTapTime=0;return}t.lastTapTime=i,t.lastTapX=l.clientX,t.lastTapY=l.clientY,t.isDragging=!0,t.dragStartX=l.clientX,t.dragStartY=l.clientY,t.lastTranslateX=p.translateX,t.lastTranslateY=p.translateY,m(!0)}else if(2===a.length){e.preventDefault(),t.isDragging=!1,t.isPinching=!0,t.initialPinchDistance=s(a[0],a[1]),t.pinchStartScale=p.scale,t.pinchStartTranslateX=p.translateX,t.pinchStartTranslateY=p.translateY;let n=o(a[0],a[1]);t.lastPinchCenterX=n.x,t.lastPinchCenterY=n.y,m(!0)}},[r,p.scale,p.translateX,p.translateY,n,f,k]),x=(0,l.useCallback)(e=>{if(!r)return;let n=e.touches,l=v.current;if(l.isDragging&&1===n.length){e.preventDefault();let a=n[0],t=a.clientX-l.dragStartX,i=a.clientY-l.dragStartY;if(b.current){let e=b.current,a=t/e.width*100,n=i/e.height*100,r=k(l.lastTranslateX+a,l.lastTranslateY+n,p.scale);f({...p,translateX:r.x,translateY:r.y})}}else if(l.isPinching&&2===n.length){if(e.preventDefault(),!b.current)return;let i=b.current,r=s(n[0],n[1])/l.initialPinchDistance,c=_(l.pinchStartScale*r,a,t),p=o(n[0],n[1]),h=i.left+i.width/2,m=i.top+i.height/2,g=p.x-h,v=p.y-m,f=g/i.width*100,M=v/i.height*100,w=(f-l.pinchStartTranslateX)/l.pinchStartScale,x=(M-l.pinchStartTranslateY)/l.pinchStartScale,y=k(f-w*c,M-x*c,c);d({scale:c,translateX:y.x,translateY:y.y}),null==u||u({scale:c,translateX:y.x,translateY:y.y})}},[r,p,a,t,f,k,u]),y=(0,l.useCallback)(e=>{if(!r)return;let a=v.current,t=e.touches.length;0===t?(a.isDragging=!1,a.isPinching=!1,m(!1)):1===t&&a.isPinching&&(a.isPinching=!1,a.isDragging=!0,a.dragStartX=e.touches[0].clientX,a.dragStartY=e.touches[0].clientY,a.lastTranslateX=p.translateX,a.lastTranslateY=p.translateY)},[r,p.translateX,p.translateY]),C=(0,l.useCallback)(()=>({transform:"translate(".concat(p.translateX,"%, ").concat(p.translateY,"%) scale(").concat(p.scale,")"),transformOrigin:"center center",transition:h?"none":"transform 0.3s ease-out"}),[p,h]);return(0,l.useEffect)(()=>{let e=g.current;if(!e||!r)return;let a={passive:!1};return e.addEventListener("touchstart",w,a),e.addEventListener("touchmove",x,a),e.addEventListener("touchend",y,a),()=>{e.removeEventListener("touchstart",w),e.removeEventListener("touchmove",x),e.removeEventListener("touchend",y)}},[r,w,x,y]),{transform:p,setTransform:f,reset:M,isGesturing:h,containerRef:g,getTransformStyle:C}}({minScale:y,maxScale:C,doubleTapScale:Z,enabled:x}),ee=(0,l.useCallback)((e,a)=>{if(!k)return{scale:1,translateX:0,translateY:0};let t=null,n=null;if(N&&a){let e=W.find(e=>e.workId===a);(null==e?void 0:e.mapLocation)&&(t=(e.mapLocation.x+.5)*100,n=(e.mapLocation.y+.5)*100)}if(null===t||null===n){if(!e)return{scale:1,translateX:0,translateY:0};let a=u.find(a=>a.uid===e);if(!(null==a?void 0:a.map_boundary)||a.map_boundary.length<3)return null;let l=a.map_boundary,i=l.reduce((e,a)=>e+a.x,0)/l.length,r=l.reduce((e,a)=>e+a.y,0)/l.length;t=(i+.5)*100,n=(r+.5)*100}let l=0,i=0;if(q.width>0&&q.height>0&&H.width>0&&H.height>0){let e=q.width/q.height,a=H.width/H.height;if(a>e){let e=q.width/a,t=(q.height-e)/q.height*100;l=t/2+n*(100-t)/100-n}else if(a<e){let e=q.height*a,n=(q.width-e)/q.width*100;i=n/2+t*(100-n)/100-t}}let r=(50-(t+i))*Z,c=(50-(n+l))*Z;return Y>0&&q.height>0&&(c-=Y/2/q.height*100),{scale:Z,translateX:r,translateY:c}},[k,N,u,W,Z,q,H,Y]);(0,l.useEffect)(()=>{if(!x)return;let e=q.width>0&&q.height>0;if(!e)return;let a=!A.current&&e;A.current=e;let t=E.current!==m,n=L.current!==j,l=R.current!==Y;if(t||n||l||a||!D.current){let e=ee(m,j);e&&(J(e),D.current=!0),E.current=m,L.current=j,R.current=Y}},[x,m,j,Y,ee,J,q]);let ea=(0,l.useMemo)(()=>{if(x)return V();if(!k||!m)return{};let e=ee(m);return e?{transform:"scale(".concat(e.scale,") translate(").concat(e.translateX,"%, ").concat(e.translateY,"%)"),transformOrigin:"center center"}:{}},[x,k,m,ee,V]),et=(0,l.useMemo)(()=>u.filter(e=>e.map_boundary&&e.map_boundary.length>=3),[u]),en=(0,l.useCallback)(e=>{null==g||g(e)},[g]),el=(0,l.useCallback)(e=>{B(e)},[]),ei=(0,l.useCallback)(()=>{B(null)},[]),er=(0,l.useCallback)(e=>{let a=m===e.uid,t=S===e.uid;return a?f:t?b.replace("0.3","0.4"):v||e.exhibitionUid?b:"transparent"},[m,S,b,f,v]),ec=(0,l.useCallback)(e=>{let a=m===e.uid,t=S===e.uid;return a||t?M:v||e.exhibitionUid?M.replace("0.8","0.5"):"transparent"},[m,S,M,v]),es=(0,l.useCallback)(()=>{j&&F&&F("")},[j,F]),eo=[p().interactiveMap__outerWrapper,I].filter(Boolean).join(" "),e_=[p().interactiveMap,x?p()["interactiveMap--gestures"]:""].filter(Boolean).join(" "),eu=k&&m,ep=x&&Q.scale>1,ed=(0,l.useCallback)(e=>{X.current=e,x&&($.current=e)},[x,$]);return(0,n.jsx)("div",{className:eo,style:P,children:(0,n.jsx)("div",{ref:ed,className:e_,onClick:es,style:P,children:(0,n.jsxs)("div",{className:"".concat(p().interactiveMap__content," ").concat(eu||ep?p()["interactiveMap__content--zoomed"]:""),style:ea,children:[(0,n.jsx)("div",{className:p().interactiveMap__imageWrapper,children:(0,n.jsx)(i.$,{src:z||a,alt:t,fill:!0,className:p().interactiveMap__image,sizes:"(max-width: 768px) 100vw, 380px",enableOffline:!1})}),(0,n.jsx)("svg",{className:p().interactiveMap__overlay,viewBox:"0 0 ".concat(U," ").concat(G),preserveAspectRatio:"xMidYMid meet",children:et.map(e=>{var a;let t=(a=e.map_boundary,a.map(e=>{let a=h(e,U,G);return"".concat(a.x,",").concat(a.y)}).join(" ")),l=function(e,a,t){if(0===e.length)return{x:0,y:0};let n=e.map(e=>h(e,a,t)),l=n.reduce((e,a)=>e+a.x,0),i=n.reduce((e,a)=>e+a.y,0);return{x:l/n.length,y:i/n.length}}(e.map_boundary,U,G),i=m===e.uid,r=!!e.exhibitionUid;return(0,n.jsxs)("g",{children:[(0,n.jsx)("polygon",{points:t,fill:er(e),stroke:ec(e),strokeWidth:i?3:2,className:"".concat(p().interactiveMap__polygon," ").concat(r?p()["interactiveMap__polygon--clickable"]:""),onClick:()=>r&&en(e),onMouseEnter:()=>r&&el(e.uid),onMouseLeave:ei,style:{cursor:r?"pointer":"default"}}),v&&(0,n.jsx)("text",{x:l.x,y:l.y,className:p().interactiveMap__label,textAnchor:"middle",dominantBaseline:"middle",children:e.name})]},e.uid)})}),W.length>0&&(0,n.jsx)("div",{className:p().interactiveMap__markersLayer,children:W.map(e=>{let a=(e.mapLocation.x+.5)*100,t=(e.mapLocation.y+.5)*100,l=a,i=t;if(q.width>0&&q.height>0&&H.width>0&&H.height>0){let e=q.width/q.height,n=H.width/H.height;if(n>e){let e=q.width/n,a=(q.height-e)/q.height*100;i=a/2+t*(100-a)/100}else if(n<e){let e=q.height*n,t=(q.width-e)/q.width*100;l=t/2+a*(100-t)/100}}let r=j===e.workId,c=x?Q.scale:1,s=Math.min(20*c,33)/c;return(0,n.jsxs)("div",{className:p().interactiveMap__markerWrapper,style:{left:"".concat(l,"%"),top:"".concat(i,"%"),transform:"translate(-50%, -50%)",width:"".concat(s,"px"),height:"".concat(s,"px"),zIndex:r?100:1},children:[r&&e.imageUrl&&(0,n.jsx)(d,{imageUrl:e.imageUrl,title:e.title,popoverCounterScale:1/c}),(0,n.jsx)("button",{type:"button",className:p().interactiveMap__markerButton,onClick:a=>{a.stopPropagation(),null==F||F(e.workId)},"aria-label":e.title,children:(0,n.jsx)("img",{src:r?"/icons/map/focus.svg":e.hasAudio?"/icons/map/audio.svg":"/icons/map/no_audio.svg",alt:e.title,className:p().interactiveMap__markerIcon,style:{width:"".concat(s,"px"),height:"".concat(s,"px")}})})]},e.workId)})})]})})})};m.displayName="InteractiveMap"},22391:(e,a,t)=>{"use strict";t.d(a,{n:()=>b});var n=t(81556),l=t(47256),i=t(34739),r=t(83678),c=t(39660),s=t(93171),o=t.n(s),_=t(52728),u=t(1437),p=t.n(u);let d=e=>{let{image:a,title:t="展品名稱",location:l="2F \xb7 205",state:r="default",onClick:s,onActionClick:u,className:d="",imageAlt:h}=e,m=(0,i.c3)("workCard");return(0,n.jsxs)("div",{className:o()(p().workCardMap,p()["workCardMap--".concat(r)],{[p()["workCardMap--clickable"]]:!!s},d),onClick:s,children:[(0,n.jsx)("div",{className:p().workCardMap__imageContainer,children:a&&(0,n.jsx)(c.$,{src:a,alt:h||t,width:68,height:68,className:p().workCardMap__image})}),(0,n.jsxs)("div",{className:p().workCardMap__content,children:[(0,n.jsxs)("div",{className:p().workCardMap__headerGroup,children:[(0,n.jsx)("span",{className:p().workCardMap__tag,children:l}),(0,n.jsx)("h3",{className:p().workCardMap__title,children:t})]}),(0,n.jsx)("button",{type:"button",className:p().workCardMap__actionButton,onClick:e=>{e.stopPropagation(),null==u||u(e)},"aria-label":(()=>{switch(r){case"playing":case"selected-playing":return m("playing");case"selected":return m("startTour");default:return m("goToMap")}})(),children:(()=>{switch(r){case"playing":case"selected-playing":return(0,n.jsx)(_.AW,{size:20,color:"gold"});case"selected":return(0,n.jsx)(_.A0.Outline,{size:16,color:"gold"});default:return(0,n.jsx)(_.y1.Outline,{size:20,color:"white"})}})()})]})]})};d.displayName="WorkCardMap";var h=t(26366),m=t.n(h),g=t(28496);let v=e=>e<=280?350:e<=390?200:80,b=e=>{let{visible:a,exhibition:t,works:c=[],currentFloorName:s="",spaceNames:o=[],selectedWorkId:u,playingWorkId:p,onExhibitionClick:h,onWorkClick:b,onWorkActionClick:f,onClose:M,onHeightChange:k,showGoToExhibitionButton:w=!0,labelText:x,className:y=""}=e,C=(0,i.c3)("map"),I=(0,i.c3)("common"),P=(0,l.useRef)(null),T=(0,l.useRef)(null),W=(0,l.useRef)(null),j=(0,l.useRef)(null),F=(0,l.useRef)(new Map),N=(0,l.useRef)(0),[Y,X]=(0,l.useState)(250),S=(0,l.useRef)(k);S.current=k;let B=null!=x?x:C("exhibition");(0,l.useEffect)(()=>{if(a&&P.current){var e;P.current.setHeight(250),N.current=250,null==(e=S.current)||e.call(S,250)}},[a]),(0,l.useEffect)(()=>{if(!a||!T.current)return;let e=T.current,t=null,n=!1,l=0,i=()=>{let a=(()=>{let a=e.querySelector(".adm-floating-panel");if(!a)return null;let t=a.getBoundingClientRect(),n=window.innerHeight,l=Math.min(t.bottom,n)-Math.max(t.top,0);return l>0?l:null})();if(null!==a&&Math.abs(a-N.current)>1){var t;return N.current=a,X(a),null==(t=S.current)||t.call(S,a),!0}return!1},r=()=>{i()?l=0:l++,n&&l<10?t=requestAnimationFrame(r):n=!1},c=()=>{n||(n=!0,l=0,r())},s=()=>{c()},o=()=>{c()};return e.addEventListener("touchstart",s,{passive:!0}),e.addEventListener("touchend",o,{passive:!0}),e.addEventListener("touchcancel",o,{passive:!0}),requestAnimationFrame(i),()=>{e.removeEventListener("touchstart",s),e.removeEventListener("touchend",o),e.removeEventListener("touchcancel",o),t&&cancelAnimationFrame(t)}},[a]),(0,l.useEffect)(()=>{if(u&&W.current){let e=F.current.get(u),a=W.current;if(e&&a){let t=a.getBoundingClientRect(),n=e.getBoundingClientRect(),l=a.scrollTop+(n.top-t.top)-16;a.scrollTo({top:Math.max(0,l),behavior:"smooth"})}}},[u]);let E=(0,l.useCallback)(()=>{t&&h&&h(t.uid)},[t,h]),L=(0,l.useCallback)(e=>{e.stopPropagation()},[]);if(!a||!t)return null;let R=o.length>0?"".concat(s," ").concat(o.join("、")):s,D=[m().mapFloatingPanel,y].filter(Boolean).join(" ");return(0,n.jsx)("div",{ref:T,className:m().mapFloatingPanel__wrapper,children:(0,n.jsx)(r.$w,{ref:P,anchors:[250,360,546],className:D,children:(0,n.jsxs)("div",{className:m().mapFloatingPanel__content,children:[(0,n.jsx)("div",{className:m().mapFloatingPanel__fixedArea,children:(0,n.jsx)("div",{className:m().mapFloatingPanel__handle,children:(0,n.jsx)("div",{className:m().mapFloatingPanel__handleBar})})}),(0,n.jsxs)("div",{ref:W,className:m().mapFloatingPanel__scrollArea,onTouchMove:L,children:[(0,n.jsxs)("div",{className:m().mapFloatingPanel__header,children:[(0,n.jsx)("h2",{className:m().mapFloatingPanel__title,children:R}),(0,n.jsxs)("div",{className:m().mapFloatingPanel__exhibitionInfo,children:[(0,n.jsx)("span",{className:m().mapFloatingPanel__label,children:B}),(0,n.jsx)("span",{className:m().mapFloatingPanel__exhibitionName,children:t.name})]})]}),w&&(0,n.jsxs)("button",{type:"button",className:m().mapFloatingPanel__goButton,onClick:E,children:[(0,n.jsx)(_.Xm.Outline,{size:18,color:"gold"}),(0,n.jsx)("span",{children:C("goToExhibition")})]}),c.length>0&&(0,n.jsx)("div",{className:m().mapFloatingPanel__works,style:{paddingBottom:p?v(Y)+g.EW.miniPlayerHeight:v(Y)},children:(0,n.jsx)("div",{ref:j,className:m().mapFloatingPanel__worksList,children:c.map(e=>{let a=e.location||"".concat(e.floor||""," ").concat(e.room||"").trim()||R,t=u===e.workID,l=p===e.workID;return(0,n.jsx)("div",{ref:a=>{a?F.current.set(e.workID,a):F.current.delete(e.workID)},children:(0,n.jsx)(d,{image:e.image||"",title:e.title,location:a,state:t&&l?"selected-playing":t?"selected":l?"playing":"default",onClick:()=>null==b?void 0:b(e),onActionClick:()=>null==f?void 0:f(e)})},e.workID)})})}),0===c.length&&(0,n.jsx)("div",{className:m().mapFloatingPanel__empty,children:(0,n.jsx)("p",{children:I("noData")})})]})]})})})};b.displayName="MapFloatingPanel"},22942:e=>{e.exports={interactiveMap__outerWrapper:"InteractiveMap_interactiveMap__outerWrapper__j_7eX",interactiveMap:"InteractiveMap_interactiveMap__Ke1Do","interactiveMap--gestures":"InteractiveMap_interactiveMap--gestures__sPR3z",interactiveMap__content:"InteractiveMap_interactiveMap__content__T_Ok8",interactiveMap__imageWrapper:"InteractiveMap_interactiveMap__imageWrapper__SoeIv",interactiveMap__image:"InteractiveMap_interactiveMap__image__XUx61",interactiveMap__overlay:"InteractiveMap_interactiveMap__overlay__20qde",interactiveMap__polygon:"InteractiveMap_interactiveMap__polygon__u_geU","interactiveMap__polygon--clickable":"InteractiveMap_interactiveMap__polygon--clickable__o78I2",interactiveMap__label:"InteractiveMap_interactiveMap__label__Ofbwn","interactiveMap__polygon--selected":"InteractiveMap_interactiveMap__polygon--selected__GOTl_",pulse:"InteractiveMap_pulse__PY9w0",interactiveMap__markersLayer:"InteractiveMap_interactiveMap__markersLayer__pRN6n",interactiveMap__markerWrapper:"InteractiveMap_interactiveMap__markerWrapper__YCf9v",interactiveMap__markerGroup:"InteractiveMap_interactiveMap__markerGroup__IItPW",interactiveMap__markerCircle:"InteractiveMap_interactiveMap__markerCircle___yHbe",interactiveMap__markerButton:"InteractiveMap_interactiveMap__markerButton__BBMwU",interactiveMap__markerIcon:"InteractiveMap_interactiveMap__markerIcon__b9anO",interactiveMap__workPopover:"InteractiveMap_interactiveMap__workPopover__dEpUr","interactiveMap__workPopover--visible":"InteractiveMap_interactiveMap__workPopover--visible__pHBbu",interactiveMap__workPopoverContent:"InteractiveMap_interactiveMap__workPopoverContent__O1vMr",interactiveMap__workPopoverImage:"InteractiveMap_interactiveMap__workPopoverImage__bU6FU",interactiveMap__workPopoverArrow:"InteractiveMap_interactiveMap__workPopoverArrow__j2og8",interactiveMap__markerPopover:"InteractiveMap_interactiveMap__markerPopover__z42Dw"}},26366:e=>{e.exports={mapFloatingPanel__wrapper:"MapFloatingPanel_mapFloatingPanel__wrapper__QVR1S",mapFloatingPanel:"MapFloatingPanel_mapFloatingPanel__HrrHz",mapFloatingPanel__content:"MapFloatingPanel_mapFloatingPanel__content__vkSPt",mapFloatingPanel__fixedArea:"MapFloatingPanel_mapFloatingPanel__fixedArea__4Sk0Z",mapFloatingPanel__scrollArea:"MapFloatingPanel_mapFloatingPanel__scrollArea__as3Qp",mapFloatingPanel__works:"MapFloatingPanel_mapFloatingPanel__works__5pNul",mapFloatingPanel__handle:"MapFloatingPanel_mapFloatingPanel__handle__1rFCJ",mapFloatingPanel__handleBar:"MapFloatingPanel_mapFloatingPanel__handleBar__Nka2X",mapFloatingPanel__header:"MapFloatingPanel_mapFloatingPanel__header__IQEc4",mapFloatingPanel__title:"MapFloatingPanel_mapFloatingPanel__title__9kGEv",mapFloatingPanel__exhibitionInfo:"MapFloatingPanel_mapFloatingPanel__exhibitionInfo__jaT3Y",mapFloatingPanel__label:"MapFloatingPanel_mapFloatingPanel__label__7symA",mapFloatingPanel__exhibitionName:"MapFloatingPanel_mapFloatingPanel__exhibitionName__tymn9",mapFloatingPanel__goButton:"MapFloatingPanel_mapFloatingPanel__goButton__LNufS",mapFloatingPanel__worksList:"MapFloatingPanel_mapFloatingPanel__worksList__kAZog",mapFloatingPanel__empty:"MapFloatingPanel_mapFloatingPanel__empty__hr5g9"}},27457:(e,a,t)=>{"use strict";t.d(a,{Y:()=>c});var n=t(81556);t(47256);var l=t(83678),i=t(34223),r=t.n(i);let c=e=>{let{items:a,defaultActiveKey:t,activeKey:i,onChange:c,className:s=""}=e,o=[r().capsuleTabs,s].filter(Boolean).join(" ");return(0,n.jsx)(l.YH,{activeKey:i,defaultActiveKey:t,onChange:c,className:o,children:a.map(e=>(0,n.jsx)(l.YH.Tab,{title:e.title,disabled:e.disabled,children:e.content},e.key))})};c.displayName="CapsuleTabs",t(79131)},34223:e=>{e.exports={capsuleTabs:"CapsuleTabs_capsuleTabs__9NcfG"}},62449:(e,a,t)=>{"use strict";function n(e){if(e.startsWith("B"))return-parseInt(e.substring(1),10);let a=e.match(/(\d+)/);return a?parseInt(a[1],10):0}function l(e){return[...e].sort((e,a)=>n(e.name)-n(a.name))}t.d(a,{g6:()=>l,sk:()=>n})},69036:(e,a,t)=>{"use strict";t.d(a,{K:()=>i});var n=t(47256),l=t(89120);function i(){let e=(0,l._)(),[a,t]=(0,n.useState)(null),[i,r]=(0,n.useState)(!0),[c,s]=(0,n.useState)(null),[o,_]=(0,n.useState)(!1),u=(0,n.useCallback)(async()=>{try{r(!0),s(null);let a=await e.map.getData();t(a),_(!navigator.onLine)}catch(e){s(e instanceof Error?e:Error("Unknown error")),_(!0)}finally{r(!1)}},[e.map]),p=(0,n.useCallback)(async()=>{try{r(!0),s(null);let a=await e.map.refresh();t(a),_(!1)}catch(e){s(e instanceof Error?e:Error("Refresh failed")),_(!0)}finally{r(!1)}},[e.map]);return(0,n.useEffect)(()=>{let e=()=>{_(!1),u()},a=()=>{_(!0)};return window.addEventListener("online",e),window.addEventListener("offline",a),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",a)}},[u]),(0,n.useEffect)(()=>{u()},[u]),{data:a,loading:i,error:c,isOffline:o,refetch:u,refresh:p}}},72633:e=>{e.exports={button:"Button_button__aem_D","button--status-disabled":"Button_button--status-disabled__SlJ2d","button--size-small":"Button_button--size-small__L4c08","button--with-icon":"Button_button--with-icon__1LJ4B","button--fill-outline":"Button_button--fill-outline__giufq","button--fill-none":"Button_button--fill-none__PkkHq","button--fill-solid":"Button_button--fill-solid__7C4sX","button--size-mini":"Button_button--size-mini__c9_2D",button__icon:"Button_button__icon__Y5aVr",button__text:"Button_button__text__Y9TfD","button--status-focused":"Button_button--status-focused__LaRSN"}},79131:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});var n=t(81556),l=t(47256),i=t(83678),r=t(1776),c=t.n(r);let s=e=>{var a;let{items:t,defaultActiveKey:r,activeKey:s,onChange:o,enableSwiper:_=!0,minimal:u=!1,className:p=""}=e,[d,h]=(0,l.useState)(r||(null==(a=t[0])?void 0:a.key)||""),m=(0,l.useRef)(null),g=void 0!==s?s:d;(0,l.useEffect)(()=>{if(_&&g){let a=t.findIndex(e=>e.key===g);if(-1!==a){var e;null==(e=m.current)||e.swipeTo(a)}}},[g,_]);let v=[c().capsuleTabsWithIcon,u&&c()["capsuleTabsWithIcon--minimal"],p].filter(Boolean).join(" ");return(0,n.jsxs)("div",{className:v,children:[_?(0,n.jsx)(i.RC,{ref:m,defaultIndex:t.findIndex(e=>e.key===g),onIndexChange:e=>{var a;let n=null==(a=t[e])?void 0:a.key;n&&n!==g&&(void 0===s&&h(n),null==o||o(n))},indicator:!1,allowTouchMove:!1,className:c().capsuleTabsWithIcon__content,style:{"--height":"auto"},children:t.map(e=>(0,n.jsx)(i.RC.Item,{children:(0,n.jsx)("div",{role:"tabpanel",id:"tabpanel-".concat(e.key),"aria-labelledby":"tab-".concat(e.key),className:c().capsuleTabsWithIcon__panel,children:e.content})},e.key))}):(0,n.jsx)("div",{className:c().capsuleTabsWithIcon__content,children:t.map(e=>(0,n.jsx)("div",{role:"tabpanel",id:"tabpanel-".concat(e.key),"aria-labelledby":"tab-".concat(e.key),className:c().capsuleTabsWithIcon__panel,style:{display:e.key===g?"block":"none"},children:e.content},e.key))}),(0,n.jsx)("div",{className:c().capsuleTabsWithIcon__header,role:"tablist",children:t.map(e=>{let a=e.key===g,l=[c().capsuleTabsWithIcon__tab,a&&c()["capsuleTabsWithIcon__tab--active"],e.disabled&&c()["capsuleTabsWithIcon__tab--disabled"],u&&c()["capsuleTabsWithIcon__tab--minimal"]].filter(Boolean).join(" "),i="function"==typeof e.icon?e.icon:e.icon.Filled,r=u?a?"black":"gray":e.iconColor||"gray",p=(0,n.jsxs)("button",{type:"button",role:"tab",id:"tab-".concat(e.key),"aria-selected":a,"aria-controls":"tabpanel-".concat(e.key),disabled:e.disabled,className:l,onClick:()=>(e=>{let a=t.find(a=>a.key===e);if(null==a?void 0:a.disabled)return;void 0===s&&h(e);let n=t.findIndex(a=>a.key===e);if(-1!==n&&_){var l;null==(l=m.current)||l.swipeTo(n)}null==o||o(e)})(e.key),children:[(0,n.jsx)(i,{size:20,color:r,className:c().capsuleTabsWithIcon__icon}),(!u||a)&&(0,n.jsx)("span",{className:c().capsuleTabsWithIcon__title,children:e.title})]},e.key);return u?(0,n.jsx)("div",{className:c().capsuleTabsWithIcon__tabWrapper,children:p},e.key):p})})]})};s.displayName="CapsuleTabsWithIcon"},79785:(e,a,t)=>{"use strict";t.d(a,{P:()=>i});var n=t(47256),l=t(47469);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{enableBottomOffset:a=!0,enablePlayingSync:t=!0,works:i=[],isFullScreenMode:r=!0,externalSelectedWorkId:c}=e,{currentTrack:s,isExpanded:o}=(0,l.F)(),_=null==s?void 0:s.id,[u,p]=(0,n.useState)(250),d=(0,n.useCallback)(e=>{p(e)},[]),[h,m]=(0,n.useState)(null),g=(0,n.useCallback)(e=>{m(e)},[]),[v,b]=(0,n.useState)(null),f=(0,n.useCallback)(e=>{b(e)},[]);return(0,n.useEffect)(()=>{t&&r&&_&&!o&&i.find(e=>e.workID===_)&&b(_)},[t,_,r,i,o]),(0,n.useEffect)(()=>{t&&(o?b(null):_&&r&&i.find(e=>e.workID===_)&&b(_))},[t,o,_,r,i]),{playingWorkId:_,panelHeight:u,bottomOffset:a?u:0,onHeightChange:d,mapBackgroundColor:h,handleMapImageLoad:g,selectedWorkId:null!=c?c:v,setSelectedWorkId:f,isExpanded:o}}},95610:(e,a,t)=>{"use strict";t.d(a,{$:()=>r});var n=t(81556);t(47256);var l=t(72633),i=t.n(l);let r=e=>{let{size:a="small",fill:t="outline",icon:l,status:r="enabled",children:c,onClick:s,type:o="button",className:_="","aria-label":u}=e,p=[i().button,i()["button--size-".concat(a)],i()["button--fill-".concat(t)],l&&i()["button--with-icon"],i()["button--status-".concat(r)],_].filter(Boolean).join(" ");return(0,n.jsxs)("button",{type:o,onClick:s,disabled:"disabled"===r,className:p,"aria-label":u,children:[l&&(0,n.jsx)(l,{size:18,className:i().button__icon,color:"solid"===t&&"small"===a?"black":"outline"===t&&"small"===a?"gold":"white","aria-hidden":"true"}),(0,n.jsx)("span",{className:i().button__text,children:c})]})};r.displayName="Button"}}]);